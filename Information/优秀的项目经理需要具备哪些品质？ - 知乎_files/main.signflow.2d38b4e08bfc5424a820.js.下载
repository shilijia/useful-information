webpackJsonp([2],{1172:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=r(d),h=n(0),m=r(h),y=n(1728),b=r(y),v=n(1744),g=r(v),w=n(1752),E=r(w);n(1754);var S=(s=l=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=o(e,["type"]),r=c({isInModal:!0},n);return m.default.createElement("div",null,m.default.createElement(b.default,c({},r,{shown:"register"===t})),m.default.createElement(g.default,c({},r,{shown:"login"===t})),m.default.createElement(E.default,c({},r,{shown:"active"===t})))}}]),t}(h.Component),l.propTypes={type:p.default.oneOf(["register","login","initial","active"]),onClose:p.default.func.isRequired,onSwitch:p.default.func},s);t.default=S},1173:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,l,s,c,f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=r(d),h=n(0),m=r(h),y=n(3),b=n(368),v=n(1755),g=r(v),w=n(1758),E=r(w),S=n(1759),C=r(S),_=n(1760),O=r(_),k=n(1761),P=r(k),T=n(229),N=n(15);n(1325);var j="LOGIN_WITH_PHONE",M="NEED_UNBIND",A=function(e){var t=e.account,n=e.config,r=e.entities,o=r.users[e.currentUser],a=o.isActive,i=o.email;return{account:t,hasActiveEmail:a&&i,needShowLoginWithPhoneNumber:!a&&!!i,config:e.config,isWindow:n.isWindow}},R=(u=(0,y.connect)(A,{requestPhoneVerificationCode:T.requestPhoneVerificationCode,updatePhoneNumber:T.updatePhoneNumber,monopolizePhoneNumber:T.monopolizePhoneNumber,showNotification:N.showNotification,getUnlockRequest:T.getUnlockRequest,unlockTicketByDigits:T.unlockTicketByDigits,requestUnlockTicket:T.requestUnlockTicket,unlockTicketByPassword:T.unlockTicketByPassword}))((c=s=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={},r.handleBindPhoneSuccess=function(){var e=r.props,t=e.needShowLoginWithPhoneNumber,n=e.showNotification,o=e.onToggle;return t?r.goToStep(j)():(n("绑定成功！","white"),setTimeout(function(){return location.reload()},2e3),o())},r.handleNeedUnbind=function(e){var t=e.bindName,n=e.phoneNumber,o=e.requiredName;return r.setState({bindName:t,phoneNumber:n,requiredName:o,step:M})},r.goToStep=function(e){return function(){return r.setState({step:e})}},r.handleCloseWithReload=function(){return location.reload()},i=n,a(r,i)}return i(t,e),f(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.getUnlockRequest,r=t.hasActiveEmail,o=t.shown,a=t.isWindow;if(e.shown&&!o){a||n();var i="";i=r?"CONFIRM_BIND_PHONE":a?"BIND_PHONE":"SAFETY_VERIFICATION",this.setState({step:i})}}},{key:"render",value:function(){var e=this.props,t=e.shown,n=e.requestPhoneVerificationCode,r=e.updatePhoneNumber,o=e.monopolizePhoneNumber,a=e.showNotification,i=e.config,u=e.account,l=e.isWindow,s=e.unlockTicketByDigits,c=e.requestUnlockTicket,f=e.unlockTicketByPassword,d=e.onToggle,p=this.state,h=p.step,y=p.bindName,v=p.phoneNumber,w=p.requiredName;return t?"CONFIRM_BIND_PHONE"===h?m.default.createElement(E.default,{onBindPhone:this.goToStep(l?"BIND_PHONE":"SAFETY_VERIFICATION"),onClose:d,config:i}):"BIND_PHONE"===h?m.default.createElement(g.default,{onClose:d,onSuccess:this.handleBindPhoneSuccess,onNeedUnbind:this.handleNeedUnbind,requestPhoneVerificationCode:n,updatePhoneNumber:r}):h===j?m.default.createElement(C.default,{onClose:this.handleCloseWithReload}):h===M?m.default.createElement(O.default,{onClose:d,onCancel:this.goToStep("BIND_PHONE"),onConfirm:this.goToStep("CONFIRM_UNBIND"),bindName:y,phoneNumber:v,requiredName:w}):"CONFIRM_UNBIND"===h?m.default.createElement(P.default,{onClose:d,onSuccess:this.handleBindPhoneSuccess,onCancel:this.goToStep("BIND_PHONE"),bindName:y,monopolizePhoneNumber:o,showNotification:a}):"SAFETY_VERIFICATION"===h?m.default.createElement(b.VerificationModal,{account:u,unlockTicketByDigits:s,requestUnlockTicket:c,unlockTicketByPassword:f,onClose:d,onSuccess:this.goToStep("BIND_PHONE"),zaModuleName:"BindMailForm"}):null:null}}]),t}(h.Component),s.propTypes={shown:p.default.bool.isRequired,onToggle:p.default.func.isRequired,needShowLoginWithPhoneNumber:p.default.bool.isRequired,config:p.default.object.isRequired,requestPhoneVerificationCode:p.default.func.isRequired,updatePhoneNumber:p.default.func.isRequired,monopolizePhoneNumber:p.default.func.isRequired},l=c))||l;t.default=R},1196:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s,c,f,d,p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=n(1),y=r(m),b=n(0),v=r(b),g=n(2),w=r(g),E=n(63),S=n(37),C=r(S),_=n(1197);n(1733);var O=(s=(0,_.connect)())((d=f=function(e){function t(){var e,n,r,o;i(this,t);for(var a=arguments.length,l=Array(a),s=0;s<a;s++)l[s]=arguments[s];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.handleErrorHide=function(){r.getValidationMessage()&&r.setState({errorMaskShown:!1},function(){r.clearValidations({errorMaskShown:!0},function(){return r.inputEl.focus()})})},r.handleKeyUp=function(e){8!==e.keyCode&&9!==e.keyCode||r.clearValidations()},r.handleChange=function(e){var t=e.target.value,n=r.props.onChange;r.setValue(t),"function"==typeof n&&n(t)},o=n,u(r,o)}return l(t,e),h(t,[{key:"componentDidMount",value:function(){var e=this.props.defaultValue;e&&this.setValue(e),this.state={errorMaskShown:!0}}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.manualValidateError,r=t.type,o=t.smsType,a=e.manualValidateError,i=e.type,u=e.defaultValue,l=e.smsType;!n&&a||"string"==typeof n&&n!==a?this.addManualValidation(a):n&&!a&&this.clearValidations({errorMaskShown:!0}),r===i&&o===l||(this.setValue(u),this.clearValidations({errorMaskShown:!0}))}},{key:"render",value:function(){var e,t=this,n=(0,E.omit)(this.props,"validations","defaultValue","onChange","smsType","manualValidateError"),r=n.className,i=n.inputClassName,u=n.errorMessageClassName,l=a(n,["className","inputClassName","errorMessageClassName"]),s=this.state||{},c=s.errorMaskShown,f=this.getValue(),d=this.getValidationMessage();return v.default.createElement("div",{className:(0,w.default)("SignFlowInput",r)},v.default.createElement(C.default,p({onRef:function(e){t.inputEl=e},value:f,onChange:this.handleChange,onKeyUp:this.handleKeyUp,onClick:this.handleErrorHide,onBlur:function(){return t.validate()},className:i},l)),v.default.createElement("div",{className:(0,w.default)("SignFlowInput-errorMask",this.getValidationClassName(),(e={},o(e,u,d),o(e,"SignFlowInput-requiredErrorMask",!f),o(e,"SignFlowInput-errorMask--hidden",!d||!c),e)),onClick:this.handleErrorHide},d))}}]),t}(b.Component),f.propTypes={inputClassName:y.default.string,errorMessageClassName:y.default.string,manualValidateError:y.default.node},c=d))||c;t.default=O},1197:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.connect=t.default=void 0;var c,f,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),m=r(h),y=n(0),b=r(y),v=n(63),g=n(1731),w=r(g),E=n(1732),S=r(E),C=(f=c=function(e){function t(){var e,n,r,o;u(this,t);for(var s=arguments.length,c=Array(s),f=0;f<s;f++)c[f]=arguments[f];return n=r=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),r.state={isValid:!0},r.inputs=[],r.attachToForm=function(e){var t=e.props.name;if(!t||r.inputs.includes(t))throw new Error("form input must specify a unqie name, but current is "+t);r.inputs.push(e)},r.detachFromForm=function(e){var t=r.inputs.indexOf(e);-1!==t&&(r.inputs=[].concat(i(r.inputs.slice(0,t)),i(r.inputs.slice(t+1))))},r.validate=function(e){var t=e.state._value,n=e.props.validations,r=[],o=[];return n?(!Array.isArray(n)&&n.type&&(n=[n]),n.forEach(function(e){var n=e.type,a=e.value,u=e.options,l=w.default[n];if(!l)throw new Error("no "+n+" rules, please define it at Form.validateRules");var s=l(t,a,u);"function"==typeof s.then?o=[].concat(i(o),[s.then(function(){},function(){r.push(e)})]):s||(r=[].concat(i(r),[e]))}),Promise.all(o).then(function(){return e.setValidations(r),r})):r},r.handleSubmit=function(e){e.preventDefault();var t=r.props,n=t.onPreSubmit,o=t.onSubmit;n(),r.validateAll().then(function(e){if(e){var t=r.inputs.reduce(function(e,t){return d({},e,a({},t.props.name,t.state._value))},{});o(t)}})},o=n,l(r,o)}return s(t,e),p(t,[{key:"getChildContext",value:function(){return{form:{attachToForm:this.attachToForm,detachFromForm:this.detachFromForm,getValue:this.getValue,setValue:this.setValue,validate:this.validate}}}},{key:"componentDidMount",value:function(){}},{key:"validateAll",value:function(){var e=this,t=this.props,n=t.onValid,r=t.onInvalid,o=[],a=[];return this.inputs.forEach(function(t){var n=e.validate(t);n&&"function"==typeof n.then?a=[].concat(i(a),[n.then(function(e){o=[].concat(i(o),i(e))})]):n&&(o=[].concat(i(o),i(n)))}),Promise.all(a).then(function(){var t=0===o.length;return e.setState({isValid:t},function(){t?n():r(o.map(function(e){return e.message}))}),t})}},{key:"render",value:function(){var e=(0,v.omit)(this.props,"onValid","onInvalid","onSubmit","onPreSubmit"),t=e.children,n=e.onRef,r=o(e,["children","onRef"]);return b.default.createElement("form",d({noValidate:!0,onSubmit:this.handleSubmit,ref:n},r),t)}}]),t}(y.Component),c.childContextTypes={form:m.default.object},c.propTypes={onValid:m.default.func,onInvalid:m.default.func,onSubmit:m.default.func,onPreSubmit:m.default.func},c.validateRules=w.default,c.defaultProps={onValid:function(){},onInvalid:function(){},onSubmit:function(){},onPreSubmit:function(){}},f);t.default=C,t.connect=S.default},1221:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{supportedCountries:e.sms.supportedCountries}}Object.defineProperty(t,"__esModule",{value:!0});var s,c,f,d,p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=n(1),y=r(m),b=n(0),v=r(b),g=n(3),w=n(50),E=r(w),S=n(63),C=n(227),_=n(1196),O=r(_);n(1735);var k=(s=(0,g.connect)(l,{getSupportedCountries:C.getSupportedCountries}))((d=f=function(e){function t(){var e,n,r,o;a(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={selectedCountry:null},r.handleSelect=function(e,t){var n=r.props,o=n.supportedCountries,a=n.onSelect,i=o[t];r.setState({selectedCountry:i}),a(i)},o=n,i(r,o)}return u(t,e),h(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.supportedCountries,n=e.getSupportedCountries;t&&t.length||n()}},{key:"render",value:function(){var e=(0,S.omit)(this.props,"getSupportedCountries","onSelect"),n=e.supportedCountries,r=e.onChange,a=e.defaultPhoneNo,i=e.type,u=e.defaultSelectedCountry,l=e.supportedCountriesShown,s=e.placeholderPrefix,c=void 0===s?"":s,f=o(e,["supportedCountries","onChange","defaultPhoneNo","type","defaultSelectedCountry","supportedCountriesShown","placeholderPrefix"]),d=this.state.selectedCountry,h=d||u,m=h.name,y=h.code;return v.default.createElement("div",{className:"SignFlow-account"},v.default.createElement("div",{className:"SignFlow-supportedCountriesSelectContainer"},Boolean(n)&&Boolean(n.length)&&l&&v.default.createElement(E.default,{plain:!0,text:m+" "+y,onChange:this.handleSelect,className:"SignFlow-supportedCountriesSelect",targetClassName:"SignFlow-supportedCountriesList"},n.map(function(e,t){var n=e.name,r=e.code;return v.default.createElement(w.Option,{key:t,value:n+" "+r})}))),l&&v.default.createElement("span",{className:"SignFlow-accountSeperator"}," "),v.default.createElement(O.default,p({className:"SignFlow-accountInputContainer",name:"register"===i?"phoneNo":"username",inputClassName:"SignFlow-accountInput",placeholder:t.getPlaceholder(i,c),onChange:r,defaultValue:a,validations:[{type:"required",message:t.getPlaceholder(i,"请输入")}],type:"digits"===i||"register"===i?"tel":"text"},f)))}}]),t}(b.Component),f.propTypes={defaultPhoneNo:y.default.string,defaultSelectedCountry:y.default.object,supportedCountries:y.default.array,onSelect:y.default.func,onChange:y.default.func,getSupportedCountries:y.default.func,type:y.default.oneOf(["register","digits","password"]).isRequired,supportedCountriesShown:y.default.bool,placeholderPrefix:y.default.string},f.defaultProps={defaultPhoneNo:"",defaultSelectedCountry:{name:"中国",code:"+86"},supportedCountriesShown:!0},f.getPlaceholder=function(e,t){return t+("digits"===e||"register"===e?"手机号":"手机号或邮箱")},c=d))||c;t.default=k},1247:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.register,n=t.registerValidateSucceeded,r=t.registerConfirmSucceeded,o=t.registerValidateErrors,a=t.registerConfirmError;return{registerValidateSucceeded:n,registerConfirmSucceeded:r,registerValidateErrors:o,captchaValidationMessage:e.captcha.captchaValidationMessage,registerConfirmError:a}}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c,f,d,p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=n(1),y=r(m),b=n(0),v=r(b),g=n(3),w=n(4),E=r(w),S=n(364),C=n(355),_=n(6),O=n(11),k=n(1314),P=r(k),T=n(1197),N=r(T),j=n(1221),M=r(j),A=n(1316),R=r(A),I=n(1737),B=r(I),D=n(1249),F=(l=(0,g.connect)(u,{validateRegister:C.validateRegister,resetRegisterValidateResult:C.resetRegisterValidateResult,validateSNSRegister:C.validateSNSRegister}),s=(0,O.zaModule)({module:"SignUpForm"}),l(c=s((d=f=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={validationResult:{}},r.checkAllInputFilled=function(){if(r.allInputFilled)return r.allInputFilled;var e=r.props,t=e.phoneNo,n=e.password,o=e.fullname,a=e.bySocial;return r.allInputFilled=(Boolean(t)||a)&&(Boolean(n)||a)&&Boolean(o),r.allInputFilled},r.handleSubmit=function(e){var t=r.props,n=t.validateRegister,o=t.validateSNSRegister,a=t.selectedCountry,i=t.captcha,u=t.bySocial,l=t.socialType,s=e.phoneNo,c=e.password,f=e.fullname,d=(0,S.parseCookie)(),h=d.atoken,m=d.atokenExpiredIn,y=d.clientId,b={accessToken:h,expiresAt:m,appkey:_.APP_KEY_MAP[l],registerType:l,socialId:y,source:"com.zhihu.web"},v=u?p({fullname:f,captcha:i},b):{phoneNo:""+a.code+s,password:c,fullname:f,captcha:i};u?o(p({},v)):n(p({},v))},r.parseErrorMessages=function(){var e=r.props,t=e.registerValidateErrors,n=void 0===t?{}:t,o=e.onSwitch,a=e.selectedCountry,i=e.phoneNo,u=e.password,l=n.phoneNo,s=void 0===l?{}:l,c=n.fullname,f=void 0===c?{}:c,d=n.password,p=void 0===d?{}:d,h=s.code,m=s.message;return{phoneNoError:100028===h?v.default.createElement("span",null,"该手机号已注册 · ",v.default.createElement(E.default,{preset:"plain",style:{color:"#3f3f3f"},onClick:function(){return o({selectedCountry:a,username:i,password:u})}},"直接登录")):m,fullnameError:f.message,passwordError:p.message}},r.handleLogSubmit=function(){(0,D.handleLogSubmit)(r,"SignUp",r.buildZAAccount())},r.handleLogSubmitValidateError=function(e){(0,D.handleLogSubmitValidateError)(r,"SignUp",r.buildZAAccount(),e)},i=n,a(r,i)}return i(t,e),h(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.registerValidateSucceeded,r=t.onSendDigits,o=t.captchaValidationMessage,a=t.registerConfirmSucceeded,i=e.bySocial,u=e.registerValidateSucceeded,l=e.captchaValidationMessage,s=e.registerConfirmSucceeded,c=e.registerConfirmError,f=e.registerValidateErrors;if(n!==u&&!1===u||a!==s&&!1===s)this.handleLogSubmitValidateError(c||f),this.setState({validationResult:{needsRefresh:!0,timestamp:Date.now()}});else if(n||!u||i)if(!a&&s){(0,S.deleteCookie)(["atoken","atokenExpiredIn"]);var d=location,p=d.pathname,h=d.search,m=d.hash;location.href="/"+(p?"?next="+p:"")+h+m,this.handleLogSubmitSuccess()}else o!==l&&(this.setState({validationResult:{message:l,needsRefresh:Boolean(l),timestamp:Date.now()}}),l&&this.handleLogSubmitValidateError(l));else r(),this.handleLogSubmitSuccess()}},{key:"componentWillUnmount",value:function(){this.props.resetRegisterValidateResult(),(0,S.deleteCookie)(["atoken","atokenExpiredIn"])}},{key:"buildZAAccount",value:function(){var e=this.props,t=e.phoneNo,n=e.selectedCountry.code,r=e.bySocial,o=e.socialType;return r?{type:D.ZA_SERVICE_NAME_MAP[o]}:{email:null,phone:t?""+n+t:null,type:"Zhihu"}}},{key:"handleLogSubmitSuccess",value:function(){(0,D.handleLogSubmitSuccess)(this,"SignUp",this.buildZAAccount())}},{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.phoneNo,r=e.fullname,o=e.password,a=e.selectedCountry,i=e.bySocial,u=this.parseErrorMessages(),l=u.phoneNoError,s=u.fullnameError,c=u.passwordError,f=this.state.validationResult;return v.default.createElement(N.default,{className:"SignFlow",onSubmit:this.handleSubmit,onPreSubmit:this.handleLogSubmit,onInvalid:this.handleLogSubmitValidateError},!i&&v.default.createElement(M.default,{type:"register",onSelect:function(e){return t("selectedCountry",e)},onChange:function(e){return t("phoneNo",e)},defaultPhoneNo:n,defaultSelectedCountry:a,manualValidateError:l}),!i&&v.default.createElement(R.default,{onChange:function(e){return t("password",e)},defaultValue:o,manualValidateError:c}),v.default.createElement(B.default,{onChange:function(e){return t("fullname",e)},name:"fullname",placeholder:"姓名",defaultValue:r,manualValidateError:s}),v.default.createElement(P.default,{className:"SignFlow-captchaContainer",canCaptchaShown:this.checkAllInputFilled(),type:"register",onUpdateInput:function(e){return t("captcha",e)},validationResult:f}),v.default.createElement(E.default,{className:"SignFlow-submitButton",preset:"primary",color:"blue",type:"submit"},"注册"))}}]),t}(b.Component),f.propTypes={supportedCountries:y.default.array,registerValidateSucceeded:y.default.bool,registerValidateErrors:y.default.object,registerConfirmError:y.default.string,captchaValidationMessage:y.default.string,onSendDigits:y.default.func.isRequired,phoneNo:y.default.string,password:y.default.string,fullname:y.default.string,onChange:y.default.func.isRequired,captcha:y.default.string,bySocial:y.default.bool,socialType:y.default.string},f.defaultProps={bySocial:!1},c=d))||c)||c);t.default=F},1248:function(e,t){},1249:function(e,t,n){"use strict";function r(e,t,n,r){l.default.trackEvent(e,{action:t,element:"Button",element_name:r},{account:n})}function o(e,t,n,r){l.default.trackEvent(e,{action:"StatusReport",element_name:r},{status:{result:"Success",event:{action:t,element:"Button"}},account:n})}function a(e,t,n,r,o){var a="object"===(void 0===r?"undefined":i(r))?Object.keys(r).map(function(e){return"object"===i(r[e])?r[e].message:r[e]}):[r];l.default.trackEvent(e,{action:"StatusReport",element_name:o},{status:{result:"Fail",error_msg:a,event:{action:t,element:"Button"}},account:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.ZA_SERVICE_NAME_MAP=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.handleLogSubmit=r,t.handleLogSubmitSuccess=o,t.handleLogSubmitValidateError=a;var u=n(8),l=function(e){return e&&e.__esModule?e:{default:e}}(u);t.ZA_SERVICE_NAME_MAP={sina:"Weibo",qq:"QQ",wechat:"Wechat"}},1250:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}([""," 秒后可重发"],[""," 秒后可重发"]),p=n(1),h=r(p),m=n(0),y=r(m),b=n(1319),v=r(b),g=n(1320),w=r(g),E=n(1196),S=r(E);n(1742);var C=(s=l=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.countDownEvent,n=e.countDownEndEvent,r=e.startAtOnce,a=e.interceptTime,i=e.isEmail,u=e.reStartTime,l=e.smsType,s=o(e,["countDownEvent","countDownEndEvent","startAtOnce","interceptTime","isEmail","reStartTime","smsType"]),f=void 0;return f=i?"邮箱":"voice"===l?"语音":"短信",y.default.createElement("div",{className:"SignFlow SignFlow-smsInputContainer"},y.default.createElement(S.default,c({name:"digits",className:"SignFlow-smsInput",type:"number",smsType:l,errorMessageClassName:"SignFlow-smsInputErrorMessage",placeholder:"输入 6 位"+f+"验证码",validations:[{type:"required",message:"请输入"+f+"验证码",className:"SignFlow-smsInputRequiredErrorMask"}]},s)),y.default.createElement(v.default,{className:"SignFlow-smsInputButton",preset:"plain",initialText:"获取"+f+"验证码",resetText:"重新获取"+f+"验证码",countingText:(0,w.default)(d,"count"),startAtOnce:r,event:t,countDownEndEvent:n,interceptTime:a,reStartTime:u}))}}]),t}(m.Component),l.propTypes={countDownEvent:h.default.func.isRequired,startAtOnce:h.default.bool,interceptTime:h.default.number,reStartTime:h.default.number,isEmail:h.default.bool,countDownEndEvent:h.default.func,smsType:h.default.string},l.defaultProps={startAtOnce:!1,isEmail:!1},s);t.default=C},1251:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){var t=e.captcha,n=t.captchaValidationMessage,r=t.captchaNeeded,o=e.login;return{loginConfirmSucceeded:o.loginConfirmSucceeded,loginConfirmError:o.loginConfirmError,sendDigitsError:o.sendDigitsError,captchaValidationMessage:n,captchaNeeded:r}}function s(e){return{module:"digits"===e.type?"SMSSignInForm":"SignInForm"}}Object.defineProperty(t,"__esModule",{value:!0});var c,f,d,p,h,m,y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=n(1),g=r(v),w=n(0),E=r(w),S=n(3),C=n(9),_=n(4),O=r(_),k=n(1321),P=r(k),T=n(8),N=r(T),j=n(356),M=n(1197),A=r(M),R=n(11),I=n(1314),B=r(I),D=n(1221),F=r(D),L=n(1316),V=r(L),x=n(1250),U=r(x),q=n(1746),H=r(q),W=n(1747),z=r(W),Q=n(1249),Y=n(353),Z=n(1749),X=r(Z),K=n(1750),G=r(K);n(365);var J={username:null,password:null,captcha:null,digits:null},$=E.default.createElement("div",{className:"SignFlow-snackBar"},E.default.createElement("span",{className:"Login-accountBlockEmphasis"},"帐号已停用。"),E.default.createElement("span",null,"如有疑问，请发邮件至"),E.default.createElement("a",{className:"SignFlow-snackBarLink",href:"mailto:i@zhihu.com"}," i@zhihu.com "),E.default.createElement("span",null,"联系管理员")),ee=(c=(0,S.connect)(l,{validateLogin:j.validateLogin,resetLoginValidateResult:j.resetLoginValidateResult,validateSendDigits:j.validateSendDigits}),f=(0,R.zaModule)(s),c(d=(0,C.withRouter)(d=f((h=p=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));m.call(n);var r=e.selectedCountry,o=e.username,u=e.password;return n.state={smsType:"text",smsBackUpName:"语音",smsBackUpDisplay:!0,reStartTime:-1,supportedCountriesShown:!1,captcha:"",selectedCountry:r,username:o,password:u,customErrorInputMap:y({},J),validationResult:{},smsInputInterceptTime:-1},n}return u(t,e),b(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.sendDigitsError,r=t.captchaValidationMessage,o=t.loginConfirmSucceeded,a=t.loginConfirmError,i=e.sendDigitsError,u=e.captchaValidationMessage,l=e.loginConfirmSucceeded,s=e.loginConfirmError,c=e.onShowExtraInfo;if(!n&&i||o!==l&&!1===l){var f=!n&&i?{smsInputInterceptTime:Date.now()}:{},d=this.parseServerError(e),p=d.captchaServerError;this.setState(y({},f,{validationResult:{message:p,needsRefresh:!0,timestamp:Date.now()}})),this.handleLogSubmitValidateError(i||s),!s||!s.extra||a&&a.extra===s.extra||c($)}else if(r!==u){var h=u?{smsInputInterceptTime:Date.now()}:{};this.setState(y({validationResult:{message:u,needsRefresh:Boolean(u),timestamp:Date.now()}},h)),u&&this.handleLogSubmitValidateError(u)}else!o&&l&&((0,Y.setLastUser)(this.state.username),this.handleLogSubmitSuccess(),location.reload());(u||(n||i)&&null===s)&&this.handleCountDownEndEvent()}},{key:"componentWillUnmount",value:function(){this.props.resetLoginValidateResult()}},{key:"buildZAAccount",value:function(){var e=this.state,t=e.username,n=e.selectedCountry.code,r=(0,H.default)(t,n),o=r.value,a=r.isEmail;return{email:a&&o?o:null,phone:a||!o?null:o,type:"Zhihu"}}},{key:"handleLogSubmitSuccess",value:function(){(0,Q.handleLogSubmitSuccess)(this,"SignIn",this.buildZAAccount(),"digits"===this.props.type?"SMSSignIn":null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.onSwitch,r=t.type,o=this.state,a=o.supportedCountriesShown,i=o.selectedCountry,u=o.username,l=o.password,s=o.validationResult,c=o.smsType,f=o.smsBackUpName,d=o.smsBackUpDisplay,p=o.customErrorInputMap.username,h=o.smsInputInterceptTime,m=o.reStartTime,y=this.parseServerError(),b=y.usernameServerError,v=y.passwordServerError,g=y.digitsServerError,w=E.default.createElement(B.default,{className:"SignFlow-captchaContainer",canCaptchaShown:this.checkAllInputFilled(),type:"digits"===r?"digitsLogin":"login",onUpdateInput:function(t){return e.handleChange("captcha",t)},validationResult:s});return"qrcode"===r?E.default.createElement(G.default,{className:"SignInQrcode",onChangeType:function(){return e.handleChangeType("password")}}):E.default.createElement(A.default,{className:"SignFlow",onSubmit:this.handleSubmit,onPreSubmit:this.handleLogSubmit,onInvalid:this.handleLogSubmitValidateError},E.default.createElement(F.default,{type:"digits"===r||a?"digits":"password",supportedCountriesShown:a,onChange:function(t){return e.handleChange("username",t)},onSelect:function(t){return e.handleChange("selectedCountry",t)},defaultSelectedCountry:i,manualValidateError:b||p,defaultValue:u}),"digits"===r&&w,"digits"===r&&E.default.createElement(U.default,{countDownEvent:function(){return e.handleSendDigits()},countDownEndEvent:this.handleCountDownEndEvent,interceptTime:h,manualValidateError:g,smsType:c,reStartTime:m}),"password"===r&&E.default.createElement(V.default,{onChange:function(t){return e.handleChange("password",t)},manualValidateError:v,defaultValue:l}),"password"===r&&w,E.default.createElement("div",{className:"Login-options"},E.default.createElement(O.default,{preset:"plain",className:"Login-switchType",onClick:function(){return e.handleChangeType("digits"===r?"password":"digits")}},"digits"===r?"密码登录（手机号或邮箱）":"手机验证码登录"),E.default.createElement(O.default,{preset:"plain",className:"Login-cannotLogin",onClick:"digits"===r?this.handleChangeSmsType:this.handleResetPassword},"digits"===r?d&&"接收"+f+"验证码":"忘记密码？")),E.default.createElement(O.default,{type:"submit",className:"SignFlow-submitButton",preset:"primary",color:"blue"},"登录"),E.default.createElement("div",{className:"Login-footer"},E.default.createElement("span",{className:"Login-qrcode"},E.default.createElement(O.default,{preset:"plain",onClick:function(){return e.handleChangeType("qrcode")}},"二维码登录")),E.default.createElement("span",{className:"Login-footerSeparate Login-qrcodeSeparate"}," · "),E.default.createElement("span",{className:"Login-aboardPhone"},E.default.createElement(O.default,{preset:"plain",onClick:this.handleSupportedCountriesShown},a?"邮箱帐号登录":"海外手机登录")),E.default.createElement("span",{className:"Login-footerSeparate"}," · "),E.default.createElement(X.default,{onRegister:n})))}}]),t}(w.Component),p.propTypes={validateLogin:g.default.func,resetLoginValidateResult:g.default.func,validateSendDigits:g.default.func,loginConfirmSucceeded:g.default.bool,loginConfirmError:g.default.object,sendDigitsError:g.default.object,captchaValidationMessage:g.default.string,captchaNeeded:g.default.bool,onSwitch:g.default.func,onShowExtraInfo:g.default.func,selectedCountry:g.default.object,username:g.default.string,password:g.default.string,type:g.default.oneOf(["password","digits","qrcode"]),onChangeType:g.default.func},p.defaultProps={selectedCountry:{name:"中国",code:"+86"},username:"",password:""},m=function(){var e=this;this.checkAllInputFilled=function(){if(e.allInputFilled)return e.allInputFilled;var t=e.props.type,n=e.state,r=n.username,o=n.password;return e.allInputFilled="digits"===t?Boolean(r):Boolean(r)&&Boolean(o),e.allInputFilled},this.handleChange=function(t,n){e.setState(o({},t,n))},this.handleChangeType=function(t){var n=e.props,r=n.type;(0,n.onChangeType)(t),"qrcode"!==t&&"password"!==t||N.default.trackEvent(e,{action:"Click",name:"qrcode"===t?"使用二维码登录":"使用密码登录"},{account:{type:"Zhihu"}}),"qrcode"!==t&&(e.setState(function(e){var t=e.username;return{username:"password"===r&&(0,P.default)(t)?"":t,smsBackUpDisplay:!0}}),N.default.trackEvent(e,{action:"Switch",element:"Button"},{account:{type:"Zhihu"}}))},this.handleChangeSmsType=function(){e.setState(function(e){var t=e.smsType;return{smsType:"text"===t?"voice":"text",smsBackUpName:"text"===t?"短信":"语音",reStartTime:Date.now()}})},this.handleCountDownEndEvent=function(){e.setState({smsBackUpDisplay:!0})},this.handleSendDigits=function(){e.setState({customErrorInputMap:y({},J),validationResult:{needsRefresh:!1,timestamp:Date.now()}},function(){var t=e.props,n=t.validateSendDigits,r=t.captchaNeeded,o=t.resetLoginValidateResult,a=e.state,i=a.username,u=a.selectedCountry.code,l=a.captcha,s=a.customErrorInputMap,c=a.validationResult,f=a.smsType;if(o(),i&&(!r||l)){return n({username:(0,H.default)(i,u).value,captcha:l,smsType:f}),void e.setState({smsBackUpDisplay:!1})}var d=r&&!l?{message:"请输入验证码",needsRefresh:!1,timestamp:Date.now()}:y({},c);e.setState({customErrorInputMap:y({},s,{username:i?"":"请输入手机号"}),smsInputInterceptTime:Date.now(),validationResult:d}),e.handleLogSubmitValidateError({username:i?"":"请输入手机号",captcha:r&&!l?"请输入验证码":""})})},this.handleSupportedCountriesShown=function(){e.setState(function(e){return{supportedCountriesShown:!e.supportedCountriesShown}})},this.handleSubmit=function(t){var n=e.props,r=n.validateLogin,o=n.type,a=e.state,i=a.selectedCountry,u=a.captcha,l=y({},t,{username:(0,H.default)(t.username,i.code).value,captcha:u});r((0,z.default)(o,l))},this.parseServerError=function(t){var n=t||e.props,r=n.loginConfirmError,o=n.sendDigitsError,a=r||{},i=a.username,u=a.password,l=a.digits,s=a.captcha,c=o||{},f=c.username;return{usernameServerError:i||f,passwordServerError:u,digitsServerError:l,captchaServerError:s}},this.handleResetPassword=function(){var t=e.props.onClose;N.default.trackEvent(e,{action:"Click",element:"Button",element_name:"ResetPassword"}),t(),window.open("/account/password_reset","_blank")},this.handleLogSubmit=function(){(0,Q.handleLogSubmit)(e,"SignIn",e.buildZAAccount(),"digits"===e.props.type?"SMSSignIn":null)},this.handleLogSubmitValidateError=function(t){(0,Q.handleLogSubmitValidateError)(e,"SignIn",e.buildZAAccount(),t,"digits"===e.props.type?"SMSSignIn":null)}},d=h))||d)||d)||d);t.default=ee},1252:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){var t=e.active;return{sendDigitsError:t.sendDigitsError,activeConfirmSucceeded:t.activeConfirmSucceeded,activeConfirmError:t.activeConfirmError}}Object.defineProperty(t,"__esModule",{value:!0});var s,c,f,d,p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),m=r(h),y=n(0),b=r(y),v=n(3),g=n(4),w=r(g),E=n(366),S=n(51),C=n(1197),_=r(C),O=n(1221),k=r(O),P=n(1250),T=r(P);n(1323);var N=(s=(0,v.connect)(l,{getUnlockTicketAndDigits:E.getUnlockTicketAndDigits,activeUserByEmail:E.activeUserByEmail,validateAndActiveUserByDigits:E.validateAndActiveUserByDigits,activeUser:S.activeUser}))((d=f=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.checkUserAccountType=function(e){return e.email?"email":"noInfo"},n.handleChange=function(e,t){n.setState(o({},e,t))},n.handleChangeSmsType=function(){n.setState(function(e){var t=e.smsType;return{smsType:"text"===t?"voice":"text",smsBackUpName:"text"===t?"短信":"语音",reStartTime:Date.now()}})},n.handleCountDownEndEvent=function(){n.setState({smsBackUpDisplay:!0})},n.handleSendDigits=function(){var e=n.props.getUnlockTicketAndDigits,t=n.state,r=t.selectedCountry.code,o=t.phoneNo,a=t.smsType;n.setState({manualError:null},function(){if(o)return e({newPhoneNo:""+r+o,smsType:a}),void n.setState({smsBackUpDisplay:!1});n.setState({manualError:"请输入手机号",smsInputInterceptTime:Date.now()})})},n.handleSubmit=function(e){var t=n.props,r=t.email,o=t.activeUserByEmail,a=t.validateAndActiveUserByDigits,i=t.onClose,u=n.state,l=u.accountType,s=u.selectedCountry.code,c=e.username,f=e.digits;"email"===l?(o({email:r}),"function"==typeof i&&i()):a({newPhoneNo:""+s+c,digits:f})},n.parseServerError=function(){var e=n.props,t=e.activeConfirmError,r=e.sendDigitsError,o=t||{},a=o.username,i=o.digits,u=r||{},l=u.username;return{usernameServerError:a||l,digitsServerError:i}},n.renderAccountInfo=function(){var e=n.props.email,t=n.state,r=t.accountType,o=t.manualError,a=n.parseServerError(),i=a.usernameServerError;return"noInfo"!==r?b.default.createElement("div",{className:"SignFlowActive-account"},e,"email"===r&&b.default.createElement("a",{target:"_blank",href:"/settings/account",className:"SignFlowActive-editEmail"},"修改邮箱")):b.default.createElement(k.default,{type:"digits",supportedCountriesShown:!0,manualValidateError:i||o,onSelect:function(e){return n.handleChange("selectedCountry",e)},onChange:function(e){return n.handleChange("phoneNo",e)}})},n.state={accountType:n.checkUserAccountType(e),selectedCountry:{code:"+86",name:"中国"},phoneNo:null,smsInputInterceptTime:-1,manualError:null,smsType:"text",smsBackUpName:"语音",smsBackUpDisplay:!0,reStartTime:-1},n}return u(t,e),p(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.sendDigitsError,r=t.onClose,o=t.activeUser,a=e.activeConfirmSucceeded,i=e.sendDigitsError;a?(r(),o()):!n&&i&&(this.setState({smsInputInterceptTime:Date.now()}),this.handleCountDownEndEvent())}},{key:"render",value:function(){var e=this.state,t=e.accountType,n=e.smsInputInterceptTime,r=e.smsType,o=e.smsBackUpName,a=e.smsBackUpDisplay,i=e.reStartTime,u=this.parseServerError(),l=u.digitsServerError;return b.default.createElement(_.default,{className:"SignFlowActive SignFlow",onSubmit:this.handleSubmit},this.renderAccountInfo(),"email"!==t&&[b.default.createElement(T.default,{key:"sms-input",manualValidateError:l,interceptTime:n,countDownEvent:this.handleSendDigits,countDownEndEvent:this.handleCountDownEndEvent,smsType:r,reStartTime:i}),a&&b.default.createElement("div",{key:"smsBackUp-button",className:"SignFlowActive-options"},b.default.createElement(w.default,{preset:"plain",className:"SignFlowActive-cutSmsType",onClick:this.handleChangeSmsType},"接收"+o+"验证码"))],b.default.createElement(w.default,{className:"email"===t?"SignFlowActive-sendEmail":"SignFlowActive-sendDigits",preset:"primary",color:"blue",type:"submit"},"email"===t?"发送激活邮件":"激活"))}}]),t}(y.Component),f.propTypes={email:m.default.string,sendDigitsError:m.default.object,getUnlockTicketAndDigits:m.default.func,activeUserByEmail:m.default.func,validateAndActiveUserByEmail:m.default.func,activeConfirmSucceeded:m.default.bool,activeConfirmError:m.default.object,onClose:m.default.func},c=d))||c;t.default=N},1314:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Captcha=void 0;var o=n(1730),a=r(o),i=n(1315),u=r(i);t.default=a.default,t.Captcha=u.default},1315:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),d=r(f),p=n(0),h=r(p),m=n(2),y=r(m),b=n(4),v=r(b),g=n(1196),w=r(g),E=n(1734),S=r(E);n(1248);var C=7,_=10,O="最多只能选择 "+C+" 个点",k=60,P=(s=l=function(e){function t(){var e,n,r,u;a(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={markPositionsArray:[]},r.handleMarkPoint=function(e){if(r.chineseCaptchaImg){var t=r.state.markPositionsArray,n=r.props.onValidation;if(t.length>=C)return void n({validationMessage:O});var a=e.pageX,i=e.pageY,u=r.chineseCaptchaImg.getBoundingClientRect(),l=u.top,s=u.left,c=i-l-window.pageYOffset-_,f=a-s-window.pageXOffset-_,d=[].concat(o(t),[{top:c,left:f+k}]);r.updateMarkPoint(d)}},r.handleUnMarkPoint=function(e){var t=[].concat(o(r.state.markPositionsArray));t.splice(e,1),r.updateMarkPoint(t)},r.updateMarkPoint=function(e){r.setState({markPositionsArray:e},function(){r.props.onUpdateInput(r.parseMarkPositionsArrayToInputValue(e))})},r.parseMarkPositionsArrayToInputValue=function(e){return JSON.stringify({img_size:[r.chineseImgWidth,r.chineseImgHeight],input_points:e.map(function(e){var t=e.top;return[e.left+_-k,t+_]})})},u=n,i(r,u)}return u(t,e),c(t,[{key:"componentDidMount",value:function(){if(this.chineseCaptchaImg){var e=this.chineseCaptchaImg.getBoundingClientRect();this.chineseImgWidth=e.width,this.chineseImgHeight=e.height}}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.url!==e.url||this.props.validationMessage!==e.validationMessage||this.props.isShown!==e.isShown||this.state.markPositionsArray!==t.markPositionsArray}},{key:"renderCaptcha",value:function(){var e=this,t=this.props,n=t.url,r=t.isChinese,o=t.onRefresh;return n?h.default.createElement("div",{className:r?"Captcha-chineseContainer":"Captcha-englishContainer"},h.default.createElement("img",{"data-tooltip":"看不清楚？换一张",className:r?"Captcha-chineseImg":"Captcha-englishImg",src:n,alt:"图形验证码",onClick:r?this.handleMarkPoint:o,ref:r&&function(t){e.chineseCaptchaImg=t}}),r?this.state.markPositionsArray.map(function(t,n){return h.default.createElement(S.default,{key:n,onUnMark:function(){return e.handleUnMarkPoint(n)},position:t})}):null):null}},{key:"render",value:function(){var e=this.props,t=e.isChinese,n=e.onRefresh,r=e.validationMessage,o=e.className,a=e.onUpdateInput,i=e.validations,u=e.isShown,l=this.renderCaptcha(),s={width:"0",height:"0",opacity:"0",overflow:"hidden",margin:"0",padding:"0"};return h.default.createElement("div",{className:(0,y.default)("Captcha",o),style:u?{}:s},t?h.default.createElement("div",null,h.default.createElement("div",{className:"Captcha-chineseOperator"},h.default.createElement("span",{className:(0,y.default)("Captcha-info",{"Captcha-error":Boolean(r)})},r||"请点击图中倒立的文字"),h.default.createElement(v.default,{className:"Captcha-chineseRefreshButton",preset:"plain",onClick:n})),l):h.default.createElement("div",null,h.default.createElement(w.default,{name:"captcha",type:"text",errorMessageClassName:"Captcha-errorMessage",placeholder:"验证码",onChange:a,validations:u?i:[],manualValidateError:r,tabIndex:u?0:-1}),h.default.createElement("span",{className:"Captcha-englishImage"},l)))}}]),t}(p.Component),l.propTypes={isChinese:d.default.bool,url:d.default.string,validationMessage:d.default.string,onValidation:d.default.func,onRefresh:d.default.func.isRequired,onUpdateInput:d.default.func.isRequired,isShown:d.default.bool,validations:d.default.array},l.defaultProps={isChinese:!1,isShown:!1,validations:[{type:"required",message:"请填写验证码",className:"Captcha-requiredErrorMessage"}]},s);t.default=P},1316:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,s,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=r(d),h=n(0),m=r(h),y=n(4),b=r(y),v=n(5),g=r(v),w=n(63),E=n(1196),S=r(E);n(1736);var C=(s=l=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSwitchPasswordInputType=function(){n.setState(function(e){return{inputType:"password"===e.inputType?"text":"password"}})},n.handleChange=function(e){n.state.hasValue!==Boolean(e)&&n.setState({hasValue:Boolean(e)}),n.props.onChange(e)},n.state={hasValue:Boolean(e.defaultValue),inputType:e.defaultType},n}return u(t,e),f(t,[{key:"render",value:function(){var e=(0,w.omit)(this.props,"onChange","defaultType"),t=e.switchDisabled,n=o(e,["switchDisabled"]),r=this.state,a=r.inputType,i=r.hasValue;return m.default.createElement("div",{className:"SignFlow-password"},m.default.createElement(S.default,c({name:"password",inputClassName:"password"===a&&i?"SignFlow-passwordInput":"",type:a,placeholder:"密码",onChange:this.handleChange,errorMessageClassName:"SignFlow-passwordErrorMask",validations:[{type:"required",message:"请输入密码",className:"SignFlow-requiredPasswordErrorMask"},{type:"minLength",value:6,message:"请输入 6-128 位密码"},{type:"maxLength",value:128,message:"请输入 6-128 位密码"}]},n)),!t&&m.default.createElement(b.default,{className:"SignFlow-switchPassword",tabIndex:-1,preset:"plain",onClick:this.handleSwitchPasswordInputType},m.default.createElement(g.default,{className:"SignFlow-switchPasswordIcon",name:"password"===a?"inconspicuous":"read",width:24,height:20,style:{verticalAlign:"middle"}})))}}]),t}(h.Component),l.propTypes={onChange:p.default.func.isRequired,switchDisabled:p.default.bool,defaultType:p.default.string},l.defaultProps={defaultType:"password"},s);t.default=C},1317:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=r(d),h=n(0),m=r(h),y=n(4),b=r(y),v=n(21),g=r(v),w=n(8),E=r(w),S=n(1247),C=r(S),_=n(1318),O=r(_),k=(s=l=function(e){function t(){var e,n,r,o;a(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.handleSwitch=function(){E.default.trackEvent(r,{action:"Click",element:"Button",element_name:"SignIn"});var e=r.props,t=e.selectedCountry,n=e.phoneNo,o=e.password;(0,e.onSwitch)({selectedCountry:t,username:n,password:o})},o=n,i(r,o)}return u(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.onClose,n=e.shown,r=e.onSwitch,a=o(e,["onClose","shown","onSwitch"]);return m.default.createElement(g.default,{onClose:t,maskClosable:!1,spread:!0},n&&m.default.createElement("div",null,m.default.createElement(O.default,{title:"加入知乎"}),m.default.createElement(C.default,c({onSwitch:r},a)),m.default.createElement("div",{className:"SignFlowModal-registerFooter"},m.default.createElement("span",null,"注册即代表同意",m.default.createElement(b.default,{preset:"plain",component:"a",target:"_blank",href:"/terms"},"《知乎协议》")),m.default.createElement("span",null,"已有帐号？",m.default.createElement(b.default,{className:"SignFlowModal-switchButton",preset:"plain",onClick:this.handleSwitch,disabled:!n},"登录")))))}}]),t}(h.Component),l.propTypes={onClose:p.default.func.isRequired,shown:p.default.bool,onSwitch:p.default.func},l.defaultProps={shown:!1},s);t.default=k},1318:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r);n(1739),t.default=function(e){var t=e.title;return o.default.createElement("div",{className:"SignFlowModalHeader"},o.default.createElement("h1",{className:"SignFlowModalHeader-title"},t),o.default.createElement("h2",{className:"SignFlowModalHeader-subTitle"},"与世界分享你的知识、经验和见解"))}},1319:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=r(d),h=n(0),m=r(h),y=n(2),b=r(y),v=n(4),g=r(v),w=n(63);n(1741);var E=(s=l=function(e){function t(e){a(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.clearTimer=function(){n.timer&&window.clearInterval(n.timer)},n.handleClick=function(e){n.state.isCounting||n.startTiming(e)},n.state={countDownTime:e.countDownTime,isCounting:!1},n.isInitialState=!0,n}return u(t,e),f(t,[{key:"componentDidMount",value:function(){this.props.startAtOnce&&this.startTiming()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.interceptTime,r=t.reStartTime,o=e.interceptTime,a=e.reStartTime;n!==o&&this.resetTiming(),r!==a&&(this.resetTiming(),this.startTiming())}},{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"resetTiming",value:function(){this.clearTimer(),this.setState({countDownTime:this.props.countDownTime,isCounting:!1})}},{key:"startTiming",value:function(e){var t=this,n=this.props,r=n.event,o=n.countDownEndEvent;"function"==typeof r&&r(e),this.isInitialState=!1,this.setState({isCounting:!0}),this.timer=setInterval(function(){var e=t.state.countDownTime;e<=0?(o&&o(),t.resetTiming()):t.setState({countDownTime:e-1})},1e3)}},{key:"renderText",value:function(){var e=this.props,t=e.initialText,n=e.resetText,r=e.countingText,o=this.state,a=o.countDownTime;return o.isCounting?r({count:a}):this.isInitialState?t:n||t}},{key:"render",value:function(){var e=(0,w.omit)(this.props,"initialText","resetText","countingText","startAtOnce","countDownTime","event","interceptTime","countDownEndEvent","reStartTime"),t=e.className,n=e.disabled,r=o(e,["className","disabled"]),a=this.state.isCounting;return m.default.createElement(g.default,c({className:(0,b.default)("CountingDownButton",t,{"is-counting":a})},r,{onClick:this.handleClick,disabled:n||a}),this.renderText())}}]),t}(h.Component),l.propTypes={countDownTime:p.default.number,startAtOnce:p.default.bool,initialText:p.default.string.isRequired,resetText:p.default.string,countingText:p.default.func.isRequired,event:p.default.func,countDownEndEvent:p.default.func,interceptTime:p.default.number,reStartTime:p.default.number},l.defaultProps={countDownTime:60,startAtOnce:!1,interceptTime:-1,reStartTime:-1},s);t.default=E},1320:function(e,t,n){"use strict";function r(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=Array(t),o=0;o<t;o++)r[o]=arguments[o];var a=r[r.length-1]||{};return n.reduce(function(t,n,o){return t.concat(Number.isInteger(n)&&r[n]||a[n],e[o+1])},[e[0]]).join("")}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},1321:function(e,t,n){"use strict";function r(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},1322:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=r(d),h=n(0),m=r(h),y=n(21),b=r(y),v=n(1318),g=r(v),w=n(1251),E=r(w),S=(s=l=function(e){function t(){var e,n,r,o;a(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={modalExtraInfo:null},r.handleModalExtraInfo=function(e){r.setState({modalExtraInfo:e})},o=n,i(r,o)}return u(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=o(e,["shown"]),r=this.state.modalExtraInfo;return m.default.createElement(b.default,{onClose:n.onClose,footer:r,maskClosable:!1,spread:!0},t&&m.default.createElement("div",null,m.default.createElement(g.default,{title:"登录知乎"}),m.default.createElement(E.default,c({onShowExtraInfo:this.handleModalExtraInfo},n))))}}]),t}(h.Component),l.propTypes={onClose:p.default.func.isRequired,shown:p.default.bool},l.defaultProps={shown:!1},s);t.default=S},1323:function(e,t){},1324:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=r(d),h=n(0),m=r(h),y=n(21),b=r(y),v=n(1252),g=r(v),w=(s=l=function(e){function t(){var e,n,r,o;a(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={snackbar:null},r.handleSetSnackbar=function(e){return r.setState({snackbar:e})},o=n,i(r,o)}return u(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.shown,n=e.onClose,r=o(e,["shown","onClose"]);return m.default.createElement(b.default,{title:"激活帐号",subtitle:"为了正常使用知乎的提问、回答、评论和编辑功能，请绑定你的手机",onClose:n,maskClosable:!1,footer:this.state.snackbar},t&&m.default.createElement(g.default,c({onClose:n,onSetSnackbar:this.handleSetSnackbar},r)))}}]),t}(h.Component),l.propTypes={shown:p.default.bool.isRequired,onClose:p.default.func.isRequired},s);t.default=w},1325:function(e,t){},1728:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.RegisterModal=t.Register=void 0;var o=n(1729),a=r(o),i=n(1247),u=r(i),l=n(1317),s=r(l);n(1743),t.default=a.default,t.Register=u.default,t.RegisterModal=s.default},1729:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,c,f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),h=r(p),m=n(0),y=r(m),b=n(1247),v=r(b),g=n(1317),w=r(g),E=n(1740),S=r(E),C={smsCodeVerificationShown:!1,phoneNo:"",password:"",fullname:"",captcha:"",selectedCountry:{name:"中国",code:"+86"}},_=(c=s=function(e){function t(){var e,n,r,o;i(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=r=u(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state=f({},C),r.handleChange=function(e,t){r.setState(a({},e,t))},r.handleClose=function(){r.setState(f({},C),function(){r.props.onClose()})},r.handleSendDigits=function(){r.setState(function(e){return{smsCodeVerificationShown:!e.smsCodeVerificationShown}})},r.renderSMSCodeVerification=function(){var e=r.state,t=e.selectedCountry.code,n=e.phoneNo,o=e.fullname,a=e.password,i=e.smsCodeVerificationShown;return y.default.createElement(S.default,{onClose:r.handleSendDigits,onBack:r.handleSendDigits,phoneNo:""+t+n,fullname:o,password:a,shown:i})},o=n,u(r,o)}return l(t,e),d(t,[{key:"render",value:function(){var e=this.props,t=e.isInModal,n=e.shown,r=o(e,["isInModal","shown"]),a=this.state,i=a.phoneNo,u=a.password,l=a.fullname,s=a.selectedCountry,c=a.captcha,d=a.smsCodeVerificationShown,p=f({phoneNo:i,password:u,fullname:l,selectedCountry:s,captcha:c,onSendDigits:this.handleSendDigits,onChange:this.handleChange},r);return y.default.createElement("div",null,t&&y.default.createElement(w.default,f({},p,{shown:n&&!d,onClose:this.handleClose})),n&&!t&&y.default.createElement(v.default,p),this.renderSMSCodeVerification())}}]),t}(m.Component),s.propTypes={isInModal:h.default.bool,onClose:h.default.func,shown:h.default.bool.isRequired},s.defaultProps={isInModal:!1},c);t.default=_},1730:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.captcha;return{captchaNeeded:t.captchaNeeded,captchaUrl:"data:image/jpg;base64,"+t.captchaBase64String}}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c,f,d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),m=r(h),y=n(0),b=r(y),v=n(3),g=n(146),w=n(1315),E=r(w);n(1248);var S=(l=(0,v.connect)(u,{checkIfCaptchaNeeded:g.checkIfCaptchaNeeded,requestForCaptcha:g.requestForCaptcha,resetCaptchaInfo:g.resetCaptchaInfo}))((f=c=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={validationMessage:""},r.handleValidation=function(e){var t=e.message,n=e.needsRefresh;void 0!==(void 0===t?"undefined":d(t))&&r.setState({validationMessage:t});var o=r.props,a=o.captchaNeeded,i=o.checkIfCaptchaNeeded,u=o.requestForCaptcha;!a&&n?i():n&&u()},i=n,a(r,i)}return i(t,e),p(t,[{key:"componentDidMount",value:function(){this.props.checkIfCaptchaNeeded()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.validationResult,r=void 0===n?{}:n,o=t.captchaNeeded,a=t.requestForCaptcha,i=e.validationResult,u=void 0===i?{}:i,l=e.captchaNeeded;!o&&l&&a(),r.timestamp!==u.timestamp&&this.handleValidation(u)}},{key:"componentWillUnmount",value:function(){this.props.resetCaptchaInfo()}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.isChinese,r=e.onUpdateInput,o=e.captchaNeeded,a=e.className,i=e.requestForCaptcha,u=e.captchaUrl,l=e.canCaptchaShown,s=this.state.validationMessage,c=l&&o,f="digitsLogin"!==t?E.default.defaultProps.validations:[];return b.default.createElement(E.default,{type:t,className:a,isShown:c,isChinese:n,url:u,validationMessage:s,onRefresh:i,onValidation:this.handleValidation,validations:f,onUpdateInput:r})}}]),t}(y.Component),c.propTypes={canCaptchaShown:m.default.bool,isChinese:m.default.bool,type:m.default.oneOf(["login","digitsLogin","register"]).isRequired,validationResult:m.default.object,captchaNeeded:m.default.bool,captchaUrl:m.default.string,onUpdateInput:m.default.func,checkIfCaptchaNeeded:m.default.func,requestForCaptcha:m.default.func},c.defaultProps={canCaptchaShown:!1,isChinese:!1},s=f))||s;t.default=S},1731:function(e,t,n){"use strict";function r(e,t){return t?e.trim():e}Object.defineProperty(t,"__esModule",{value:!0});var o={useTrim:!0},a={required:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";arguments[1];return""!==r(e,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:o).useTrim)},maxLength:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];return r(e,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:o).useTrim).length<=t},minLength:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];return r(e,(arguments.length>2&&void 0!==arguments[2]?arguments[2]:o).useTrim).length>=t},pattern:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,a=n.useTrim;return t.test(r(e,a))}};t.default=a},1732:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){function t(e){for(var t=a[e],n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return"function"==typeof t?t.apply(void 0,r):void 0}var n=e.contextTypes,o=e.defaultProps,a=Object.assign({},e.prototype);Object.assign(e.prototype,{componentWillMount:function(){var e=this.context.form;e&&(e.attachToForm(this),this.setState({_value:"",_validations:[]}));for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.apply(void 0,["componentWillMount"].concat(r))},componentWillUnmount:function(){var e=this.context.form;e&&e.detachFromForm(this);for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.apply(void 0,["componentWillUnmount"].concat(r))},getValue:function(){var e=this.state||{},t=e._value;return null==t?"":t},setValue:function(e,t){this.setState({_value:e},function(){"function"==typeof t&&t()})},getValidationMessage:function(){var e=this.getValidationMessages();return e&&e[0]},getValidationClassName:function(){var e=this.state||{},t=e._validations;return t&&t[0]&&t[0].className},getValidationMessages:function(){var e=this.state||{},t=e._validations;return t&&t.map(function(e){return e.message})},setValidations:function(e){var t=this;this.setState({_validations:e},function(){return t.forceUpdate()})},clearValidations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=this.state||{},r=n._validations;r&&r.length>0&&this.setState(i({},e,{_validations:[]}),t)},addValidation:function(e){this.setState(function(t){var n=t._validations;return{_validations:[e].concat(r(n||[]))}})},addManualValidation:function(e){this.addValidation({type:"manual",message:e})},validate:function(){this.context.form.validate(this)}}),Object.assign(e,{contextTypes:i({},n,{form:l.default.object}),defaultProps:i({},o,{validations:[]})})}function a(){return function(e){return o(e)}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=a;var u=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(u)},1733:function(e,t){},1734:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,l,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),f=r(c),d=n(0),p=r(d),h=n(2),m=r(h),y=n(4),b=r(y),v=n(5),g=r(v);n(1248);var w=(l=u=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={hovered:!0},r.handleMouseEnter=function(){r.setState({hovered:!0})},r.handleMouseLeave=function(){r.setState({hovered:!1})},i=n,a(r,i)}return i(t,e),s(t,[{key:"componentWillReceiveProps",value:function(e){this.props.position!==e.position&&this.handleMouseLeave()}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.position!==e.position||this.state.hovered!==t.hovered}},{key:"render",value:function(){var e=this.props,t=e.position,n=e.onUnMark,r=this.state.hovered;return p.default.createElement(b.default,{className:"ChineseCaptchaPoint",style:t,onClick:n,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,preset:"plain"},p.default.createElement(g.default,{name:"captchaPointCircle",className:(0,m.default)("ChineseCaptchaPoint-backIcon",{"ChineseCaptchaPoint-backIcon--hovered":r}),fill:r?"#0f88eb":"#aad9ff",width:20,height:20}),p.default.createElement(g.default,{name:r?"captchaPointCancel":"captchaPointCircle",className:(0,m.default)("ChineseCaptchaPoint-frontIcon",{"ChineseCaptchaPoint-frontIcon--hovered":r}),fill:r?"#ffffff":"#0f88eb",width:r?8:12,height:r?8:12}))}}]),t}(d.Component),u.propTypes={onUnMark:f.default.func.isRequired,position:f.default.object.isRequired},l);t.default=w},1735:function(e,t){},1736:function(e,t){},1737:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=r(d),h=n(0),m=r(h),y=n(1196),b=r(y);n(1738);var v=(s=l=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=o(e,["onChange"]);return m.default.createElement(b.default,c({className:"SignFlow-username",onChange:t,validations:[{type:"required",message:"请输入用户名"}]},n))}}]),t}(h.Component),l.propTypes={onChange:p.default.func.isRequired},s);t.default=v},1738:function(e,t){},1739:function(e,t){},1740:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.register;return{registerConfirmError:t.registerConfirmError,sendDigitsError:t.sendDigitsError,registerConfirmSucceeded:t.registerConfirmSucceeded}}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c,f,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(1),m=r(h),y=n(0),b=r(y),v=n(3),g=n(4),w=r(g),E=n(5),S=r(E),C=n(21),_=r(C),O=n(1197),k=r(O),P=n(355),T=n(1250),N=r(T),j=n(353),M=(l=(0,v.connect)(u,{sendDigits:P.sendDigits,confirmRegister:P.confirmRegister}))((f=c=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={modalFooterContent:null,smsType:"text",smsBackUpName:"语音",reStartTime:-1,interceptTime:-1,sendSMSCodeCount:0,smsBackUpDisplay:!0},r.handleModalFooterStatus=function(e){r.setState({modalFooterContent:e})},r.handleChangeSmsType=function(){r.setState(function(e){var t=e.smsType;return{smsType:"text"===t?"voice":"text",smsBackUpName:"text"===t?"短信":"语音",reStartTime:Date.now()}})},r.handleCountDownEndEvent=function(){r.setState({smsBackUpDisplay:!0})},r.handleSubmit=function(e){var t=r.props,n=t.phoneNo,o=t.fullname,a=t.password;(0,t.confirmRegister)(d({},e,{phoneNo:n,fullname:o,password:a,registerType:"phone_digits"}))},r.handleSendDigits=function(){var e=r.props,t=e.sendDigits,n=e.phoneNo,o=r.state,a=o.smsType,i=o.sendSMSCodeCount;t(n,a),0!==i&&r.setState({smsBackUpDisplay:!1}),r.setState(function(e){return{sendSMSCodeCount:e++}})},i=n,a(r,i)}return i(t,e),p(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.sendDigitsError,n=e.sendDigitsError;if(!this.props.registerConfirmSucceeded&&e.registerConfirmSucceeded){(0,j.setLastUser)(this.props.phoneNo);var r=location,o=r.pathname,a=r.search,i=r.hash;location.href="/"+(o?"?next="+o:"")+a+i}!t&&n&&(this.setState({interceptTime:Date.now()}),this.handleCountDownEndEvent())}},{key:"render",value:function(){var e=this,t=this.props,n=t.phoneNo,r=t.onBack,o=t.registerConfirmError,a=t.sendDigitsError,i=t.onClose,u=t.shown,l=this.state,s=l.modalFooterContent,c=l.smsType,f=l.smsBackUpDisplay,d=l.smsBackUpName,p=l.reStartTime,h=l.interceptTime;return b.default.createElement(_.default,{onClose:i,footer:s},u?b.default.createElement("div",{className:"RegisterSMSCodeVerificationDialog"},b.default.createElement(w.default,{className:"RegisterSMSCodeVerificationDialog-backButton",preset:"plain",onClick:r},b.default.createElement(S.default,{name:"arrowLeft",width:17,height:17})),b.default.createElement("div",{className:"RegisterSMSCodeVerificationDialog-header"},b.default.createElement("h1",{className:"RegisterSMSCodeVerificationDialog-title"},"验证手机"),b.default.createElement("h2",{className:"RegisterSMSCodeVerificationDialog-subtitle"},"请输入你收到的 6 位数验证码")),b.default.createElement(k.default,{className:"RegisterSMSCodeVerificationDialog-form",onSubmit:this.handleSubmit},b.default.createElement("div",{className:"RegisterSMSCodeVerificationDialog-phoneNo"},n),b.default.createElement(N.default,{countDownEvent:function(){return e.handleSendDigits()},manualValidateError:a||o,countDownEndEvent:this.handleCountDownEndEvent,smsType:c,reStartTime:p,interceptTime:h,startAtOnce:!0}),b.default.createElement("div",{className:"RegisterSMSTypeOptions"},b.default.createElement(w.default,{preset:"plain",className:"RegisterSMSTypeCut",onClick:this.handleChangeSmsType},f&&"接收"+d+"验证码")),b.default.createElement("div",{className:"RegisterSMSCodeVerificationDialog-buttonContainer"},b.default.createElement(w.default,{className:"RegisterSMSCodeVerificationDialog-enterButton",preset:"primary",color:"blue",type:"submit"},"进入知乎")))):null)}}]),t}(y.Component),c.PropTypes={phoneNo:m.default.string.isRequired,fullname:m.default.string.isRequired,password:m.default.string.isRequired,onBack:m.default.func,sendDigits:m.default.func,confirmRegister:m.default.func,registerConfirmError:m.default.string,modalFooterContentShown:m.default.bool,modalFooterContent:m.default.node,onClose:m.default.func.isRequired,shown:m.default.bool},c.defaultProps={hasBackButton:!1,modalFooterContentShown:!1,modalFooterContent:null,shown:!1},s=f))||s;t.default=M},1741:function(e,t){},1742:function(e,t){},1743:function(e,t){},1744:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LoginModal=t.Login=void 0;var o=n(1745),a=r(o),i=n(1251),u=r(i),l=n(1322),s=r(l);n(1751),t.default=a.default,t.Login=u.default,t.LoginModal=s.default},1745:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=r(d),h=n(0),m=r(h),y=n(1251),b=r(y),v=n(1322),g=r(v),w=(s=l=function(e){function t(){var e,n,r,o;a(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={type:"password"},r.handleChangeType=function(e){r.setState({type:e||"password"})},o=n,i(r,o)}return u(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.isInModal,n=e.shown,r=e.onClose,a=o(e,["isInModal","shown","onClose"]),i=c({type:this.state.type,onChangeType:this.handleChangeType},a);return m.default.createElement("div",null,t&&m.default.createElement(g.default,c({shown:n,onClose:r},i)),n&&!t&&m.default.createElement(b.default,i))}}]),t}(h.Component),l.propTypes={isInModal:p.default.bool,onClose:p.default.func,onSwitch:p.default.func,shown:p.default.bool},l.defautProps={isInModal:!1},s);t.default=w},1746:function(e,t,n){"use strict";function r(e){return{hasCode:e.startsWith("+")||e.startsWith("00"),parsedPhoneNo:e.startsWith("00")?"+"+e.slice(2):e}}function o(e,t){if(!e)return{};var n=e,o=(0,i.default)(e);if(!o){var a=r(e),u=a.hasCode,l=a.parsedPhoneNo;n=u?l:""+t+e}return{value:n,isEmail:o}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var a=n(1321),i=function(e){return e&&e.__esModule?e:{default:e}}(a)},1747:function(e,t,n){"use strict";function r(e,t){var n=Date.now(),r=new i.default("SHA-1","TEXT");return r.setHMACKey("d1b964811afb40118a12068ff74a12f4","TEXT"),r.update(e),r.update(u.CLIENT_ALIAS),r.update("com.zhihu.web"),r.update(String(n)),o({clientId:u.CLIENT_ALIAS,grantType:e,timestamp:n,source:"com.zhihu.web",signature:r.getHMAC("HEX")},t)}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(1748),i=function(e){return e&&e.__esModule?e:{default:e}}(a),u=n(222);t.default=r},1748:function(e,t,n){"use strict";var r;!function(o){function a(e,t,n){var r,o,a,i,u,l,s,c,b,v=0,g=[],w=0,E=!1,S=[],C=[],_=!1,O=!1;if(n=n||{},r=n.encoding||"UTF8",b=n.numRounds||1,a=y(t,r),b!==parseInt(b,10)||1>b)throw Error("numRounds must a integer >= 1");if("SHA-1"===e)u=512,l=q,s=H,i=160,c=function(e){return e.slice()};else if(0===e.lastIndexOf("SHA-",0))if(l=function(t,n){return W(t,n,e)},s=function(t,n,r,o){var a,i;if("SHA-224"===e||"SHA-256"===e)a=15+(n+65>>>9<<4),i=16;else{if("SHA-384"!==e&&"SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");a=31+(n+129>>>10<<5),i=32}for(;t.length<=a;)t.push(0);for(t[n>>>5]|=128<<24-n%32,n+=r,t[a]=4294967295&n,t[a-1]=n/4294967296|0,r=t.length,n=0;n<r;n+=i)o=W(t.slice(n,n+i),o,e);if("SHA-224"===e)t=[o[0],o[1],o[2],o[3],o[4],o[5],o[6]];else if("SHA-256"===e)t=o;else if("SHA-384"===e)t=[o[0].a,o[0].b,o[1].a,o[1].b,o[2].a,o[2].b,o[3].a,o[3].b,o[4].a,o[4].b,o[5].a,o[5].b];else{if("SHA-512"!==e)throw Error("Unexpected error in SHA-2 implementation");t=[o[0].a,o[0].b,o[1].a,o[1].b,o[2].a,o[2].b,o[3].a,o[3].b,o[4].a,o[4].b,o[5].a,o[5].b,o[6].a,o[6].b,o[7].a,o[7].b]}return t},c=function(e){return e.slice()},"SHA-224"===e)u=512,i=224;else if("SHA-256"===e)u=512,i=256;else if("SHA-384"===e)u=1024,i=384;else{if("SHA-512"!==e)throw Error("Chosen SHA variant is not supported");u=1024,i=512}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("Chosen SHA variant is not supported");var k=6;if(l=z,c=function(e){var t,n=[];for(t=0;5>t;t+=1)n[t]=e[t].slice();return n},"SHA3-224"===e)u=1152,i=224;else if("SHA3-256"===e)u=1088,i=256;else if("SHA3-384"===e)u=832,i=384;else if("SHA3-512"===e)u=576,i=512;else if("SHAKE128"===e)u=1344,i=-1,k=31,O=!0;else{if("SHAKE256"!==e)throw Error("Chosen SHA variant is not supported");u=1088,i=-1,k=31,O=!0}s=function(e,t,n,r,o){n=u;var a,i=k,l=[],s=n>>>5,c=0,f=t>>>5;for(a=0;a<f&&t>=n;a+=s)r=z(e.slice(a,a+s),r),t-=n;for(e=e.slice(a),t%=n;e.length<s;)e.push(0);for(a=t>>>3,e[a>>2]^=i<<24-a%4*8,e[s-1]^=128,r=z(e,r);32*l.length<o&&(e=r[c%5][c/5|0],l.push((255&e.b)<<24|(65280&e.b)<<8|(16711680&e.b)>>8|e.b>>>24),!(32*l.length>=o));)l.push((255&e.a)<<24|(65280&e.a)<<8|(16711680&e.a)>>8|e.a>>>24),0==64*(c+=1)%n&&z(null,r);return l}}o=U(e),this.setHMACKey=function(t,n,a){var c;if(!0===E)throw Error("HMAC key already set");if(!0===_)throw Error("Cannot set HMAC key after calling update");if(!0===O)throw Error("SHAKE is not supported for HMAC");if(r=(a||{}).encoding||"UTF8",n=y(n,r)(t),t=n.binLen,n=n.value,c=u>>>3,a=c/4-1,c<t/8){for(n=s(n,t,0,U(e),i);n.length<=a;)n.push(0);n[a]&=4294967040}else if(c>t/8){for(;n.length<=a;)n.push(0);n[a]&=4294967040}for(t=0;t<=a;t+=1)S[t]=909522486^n[t],C[t]=1549556828^n[t];o=l(S,o),v=u,E=!0},this.update=function(e){var t,n,r,i=0,s=u>>>5;for(t=a(e,g,w),e=t.binLen,n=t.value,t=e>>>5,r=0;r<t;r+=s)i+u<=e&&(o=l(n.slice(r,r+s),o),i+=u);v+=i,g=n.slice(i>>>5),w=e%u,_=!0},this.getHash=function(t,n){var r,a,u,l;if(!0===E)throw Error("Cannot call getHash after setting HMAC key");if(u=m(n),!0===O){if(-1===u.shakeLen)throw Error("shakeLen must be specified in options");i=u.shakeLen}switch(t){case"HEX":r=function(e){return f(e,i,u)};break;case"B64":r=function(e){return d(e,i,u)};break;case"BYTES":r=function(e){return p(e,i)};break;case"ARRAYBUFFER":try{a=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}r=function(e){return h(e,i)};break;default:throw Error("format must be HEX, B64, BYTES, or ARRAYBUFFER")}for(l=s(g.slice(),w,v,c(o),i),a=1;a<b;a+=1)!0===O&&0!=i%32&&(l[l.length-1]&=4294967040<<24-i%32),l=s(l,i,0,U(e),i);return r(l)},this.getHMAC=function(t,n){var r,a,y,b;if(!1===E)throw Error("Cannot call getHMAC without first setting HMAC key");switch(y=m(n),t){case"HEX":r=function(e){return f(e,i,y)};break;case"B64":r=function(e){return d(e,i,y)};break;case"BYTES":r=function(e){return p(e,i)};break;case"ARRAYBUFFER":try{r=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}r=function(e){return h(e,i)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, or ARRAYBUFFER")}return a=s(g.slice(),w,v,c(o),i),b=l(C,U(e)),b=s(a,i,u,b,i),r(b)}}function i(e,t){this.a=e,this.b=t}function u(e,t,n){var r,o,a,i,u,l=e.length;if(t=t||[0],n=n||0,u=n>>>3,0!=l%2)throw Error("String of HEX type must be in byte increments");for(r=0;r<l;r+=2){if(o=parseInt(e.substr(r,2),16),isNaN(o))throw Error("String of HEX type contains invalid characters");for(i=(r>>>1)+u,a=i>>>2;t.length<=a;)t.push(0);t[a]|=o<<8*(3-i%4)}return{value:t,binLen:4*l+n}}function l(e,t,n){var r,o,a,i,u=[],u=t||[0];for(n=n||0,o=n>>>3,r=0;r<e.length;r+=1)t=e.charCodeAt(r),i=r+o,a=i>>>2,u.length<=a&&u.push(0),u[a]|=t<<8*(3-i%4);return{value:u,binLen:8*e.length+n}}function s(e,t,n){var r,o,a,i,u,l,s=[],c=0,s=t||[0];if(n=n||0,t=n>>>3,-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(o=e.indexOf("="),e=e.replace(/\=/g,""),-1!==o&&o<e.length)throw Error("Invalid '=' found in base-64 string");for(o=0;o<e.length;o+=4){for(u=e.substr(o,4),a=i=0;a<u.length;a+=1)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(u[a]),i|=r<<18-6*a;for(a=0;a<u.length-1;a+=1){for(l=c+t,r=l>>>2;s.length<=r;)s.push(0);s[r]|=(i>>>16-8*a&255)<<8*(3-l%4),c+=1}}return{value:s,binLen:8*c+n}}function c(e,t,n){var r,o,a,i=[],i=t||[0];for(n=n||0,r=n>>>3,t=0;t<e.byteLength;t+=1)a=t+r,o=a>>>2,i.length<=o&&i.push(0),i[o]|=e[t]<<8*(3-a%4);return{value:i,binLen:8*e.byteLength+n}}function f(e,t,n){var r="";t/=8;var o,a;for(o=0;o<t;o+=1)a=e[o>>>2]>>>8*(3-o%4),r+="0123456789abcdef".charAt(a>>>4&15)+"0123456789abcdef".charAt(15&a);return n.outputUpper?r.toUpperCase():r}function d(e,t,n){var r,o,a,i="",u=t/8;for(r=0;r<u;r+=3)for(o=r+1<u?e[r+1>>>2]:0,a=r+2<u?e[r+2>>>2]:0,a=(e[r>>>2]>>>8*(3-r%4)&255)<<16|(o>>>8*(3-(r+1)%4)&255)<<8|a>>>8*(3-(r+2)%4)&255,o=0;4>o;o+=1)i+=8*r+6*o<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>>6*(3-o)&63):n.b64Pad;return i}function p(e,t){var n,r,o="",a=t/8;for(n=0;n<a;n+=1)r=e[n>>>2]>>>8*(3-n%4)&255,o+=String.fromCharCode(r);return o}function h(e,t){var n,r=t/8,o=new ArrayBuffer(r);for(n=0;n<r;n+=1)o[n]=e[n>>>2]>>>8*(3-n%4)&255;return o}function m(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},t.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),!0===e.hasOwnProperty("shakeLen")){if(0!=e.shakeLen%8)throw Error("shakeLen must be a multiple of 8");t.shakeLen=e.shakeLen}if("boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function y(e,t){var n;switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":n=u;break;case"TEXT":n=function(e,n,r){var o,a,i,u,l,s=[],c=[],f=0,s=n||[0];if(n=r||0,i=n>>>3,"UTF8"===t)for(o=0;o<e.length;o+=1)for(r=e.charCodeAt(o),c=[],128>r?c.push(r):2048>r?(c.push(192|r>>>6),c.push(128|63&r)):55296>r||57344<=r?c.push(224|r>>>12,128|r>>>6&63,128|63&r):(o+=1,r=65536+((1023&r)<<10|1023&e.charCodeAt(o)),c.push(240|r>>>18,128|r>>>12&63,128|r>>>6&63,128|63&r)),a=0;a<c.length;a+=1){for(l=f+i,u=l>>>2;s.length<=u;)s.push(0);s[u]|=c[a]<<8*(3-l%4),f+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(o=0;o<e.length;o+=1){for(r=e.charCodeAt(o),"UTF16LE"===t&&(a=255&r,r=a<<8|r>>>8),l=f+i,u=l>>>2;s.length<=u;)s.push(0);s[u]|=r<<8*(2-l%4),f+=2}return{value:s,binLen:8*f+n}};break;case"B64":n=s;break;case"BYTES":n=l;break;case"ARRAYBUFFER":try{n=new ArrayBuffer(0)}catch(e){throw Error("ARRAYBUFFER not supported by this environment")}n=c;break;default:throw Error("format must be HEX, TEXT, B64, BYTES, or ARRAYBUFFER")}return n}function b(e,t){return e<<t|e>>>32-t}function v(e,t){return 32<t?(t-=32,new i(e.b<<t|e.a>>>32-t,e.a<<t|e.b>>>32-t)):0!==t?new i(e.a<<t|e.b>>>32-t,e.b<<t|e.a>>>32-t):e}function g(e,t){return e>>>t|e<<32-t}function w(e,t){var n=null,n=new i(e.a,e.b);return n=32>=t?new i(n.a>>>t|n.b<<32-t&4294967295,n.b>>>t|n.a<<32-t&4294967295):new i(n.b>>>t-32|n.a<<64-t&4294967295,n.a>>>t-32|n.b<<64-t&4294967295)}function E(e,t){return 32>=t?new i(e.a>>>t,e.b>>>t|e.a<<32-t&4294967295):new i(0,e.a>>>t-32)}function S(e,t,n){return e&t^~e&n}function C(e,t,n){return new i(e.a&t.a^~e.a&n.a,e.b&t.b^~e.b&n.b)}function _(e,t,n){return e&t^e&n^t&n}function O(e,t,n){return new i(e.a&t.a^e.a&n.a^t.a&n.a,e.b&t.b^e.b&n.b^t.b&n.b)}function k(e){return g(e,2)^g(e,13)^g(e,22)}function P(e){var t=w(e,28),n=w(e,34);return e=w(e,39),new i(t.a^n.a^e.a,t.b^n.b^e.b)}function T(e){return g(e,6)^g(e,11)^g(e,25)}function N(e){var t=w(e,14),n=w(e,18);return e=w(e,41),new i(t.a^n.a^e.a,t.b^n.b^e.b)}function j(e){return g(e,7)^g(e,18)^e>>>3}function M(e){var t=w(e,1),n=w(e,8);return e=E(e,7),new i(t.a^n.a^e.a,t.b^n.b^e.b)}function A(e){return g(e,17)^g(e,19)^e>>>10}function R(e){var t=w(e,19),n=w(e,61);return e=E(e,6),new i(t.a^n.a^e.a,t.b^n.b^e.b)}function I(e,t){var n=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(n>>>16)&65535)<<16|65535&n}function B(e,t,n,r){var o=(65535&e)+(65535&t)+(65535&n)+(65535&r);return((e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(o>>>16)&65535)<<16|65535&o}function D(e,t,n,r,o){var a=(65535&e)+(65535&t)+(65535&n)+(65535&r)+(65535&o);return((e>>>16)+(t>>>16)+(n>>>16)+(r>>>16)+(o>>>16)+(a>>>16)&65535)<<16|65535&a}function F(e,t){var n,r,o;return n=(65535&e.b)+(65535&t.b),r=(e.b>>>16)+(t.b>>>16)+(n>>>16),o=(65535&r)<<16|65535&n,n=(65535&e.a)+(65535&t.a)+(r>>>16),r=(e.a>>>16)+(t.a>>>16)+(n>>>16),new i((65535&r)<<16|65535&n,o)}function L(e,t,n,r){var o,a,u;return o=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&r.b),a=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(r.b>>>16)+(o>>>16),u=(65535&a)<<16|65535&o,o=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&r.a)+(a>>>16),a=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(r.a>>>16)+(o>>>16),new i((65535&a)<<16|65535&o,u)}function V(e,t,n,r,o){var a,u,l;return a=(65535&e.b)+(65535&t.b)+(65535&n.b)+(65535&r.b)+(65535&o.b),u=(e.b>>>16)+(t.b>>>16)+(n.b>>>16)+(r.b>>>16)+(o.b>>>16)+(a>>>16),l=(65535&u)<<16|65535&a,a=(65535&e.a)+(65535&t.a)+(65535&n.a)+(65535&r.a)+(65535&o.a)+(u>>>16),u=(e.a>>>16)+(t.a>>>16)+(n.a>>>16)+(r.a>>>16)+(o.a>>>16)+(a>>>16),new i((65535&u)<<16|65535&a,l)}function x(e){var t,n=0,r=0;for(t=0;t<arguments.length;t+=1)n^=arguments[t].b,r^=arguments[t].a;return new i(r,n)}function U(e){var t,n=[];if("SHA-1"===e)n=[1732584193,4023233417,2562383102,271733878,3285377520];else if(0===e.lastIndexOf("SHA-",0))switch(n=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],t=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e){case"SHA-224":break;case"SHA-256":n=t;break;case"SHA-384":n=[new i(3418070365,n[0]),new i(1654270250,n[1]),new i(2438529370,n[2]),new i(355462360,n[3]),new i(1731405415,n[4]),new i(41048885895,n[5]),new i(3675008525,n[6]),new i(1203062813,n[7])];break;case"SHA-512":n=[new i(t[0],4089235720),new i(t[1],2227873595),new i(t[2],4271175723),new i(t[3],1595750129),new i(t[4],2917565137),new i(t[5],725511199),new i(t[6],4215389547),new i(t[7],327033209)];break;default:throw Error("Unknown SHA variant")}else{if(0!==e.lastIndexOf("SHA3-",0)&&0!==e.lastIndexOf("SHAKE",0))throw Error("No SHA variants supported");for(e=0;5>e;e+=1)n[e]=[new i(0,0),new i(0,0),new i(0,0),new i(0,0),new i(0,0)]}return n}function q(e,t){var n,r,o,a,i,u,l,s=[];for(n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],l=0;80>l;l+=1)s[l]=16>l?e[l]:b(s[l-3]^s[l-8]^s[l-14]^s[l-16],1),u=20>l?D(b(n,5),r&o^~r&a,i,1518500249,s[l]):40>l?D(b(n,5),r^o^a,i,1859775393,s[l]):60>l?D(b(n,5),_(r,o,a),i,2400959708,s[l]):D(b(n,5),r^o^a,i,3395469782,s[l]),i=a,a=o,o=b(r,30),r=n,n=u;return t[0]=I(n,t[0]),t[1]=I(r,t[1]),t[2]=I(o,t[2]),t[3]=I(a,t[3]),t[4]=I(i,t[4]),t}function H(e,t,n,r){var o;for(o=15+(t+65>>>9<<4);e.length<=o;)e.push(0);for(e[t>>>5]|=128<<24-t%32,t+=n,e[o]=4294967295&t,e[o-1]=t/4294967296|0,t=e.length,o=0;o<t;o+=16)r=q(e.slice(o,o+16),r);return r}function W(e,t,n){var r,o,a,u,l,s,c,f,d,p,h,m,y,b,v,g,w,E,x,U,q,H,W,z=[];if("SHA-224"===n||"SHA-256"===n)p=64,m=1,H=Number,y=I,b=B,v=D,g=j,w=A,E=k,x=T,q=_,U=S,W=Q;else{if("SHA-384"!==n&&"SHA-512"!==n)throw Error("Unexpected error in SHA-2 implementation");p=80,m=2,H=i,y=F,b=L,v=V,g=M,w=R,E=P,x=N,q=O,U=C,W=Y}for(n=t[0],r=t[1],o=t[2],a=t[3],u=t[4],l=t[5],s=t[6],c=t[7],h=0;h<p;h+=1)16>h?(d=h*m,f=e.length<=d?0:e[d],d=e.length<=d+1?0:e[d+1],z[h]=new H(f,d)):z[h]=b(w(z[h-2]),z[h-7],g(z[h-15]),z[h-16]),f=v(c,x(u),U(u,l,s),W[h],z[h]),d=y(E(n),q(n,r,o)),c=s,s=l,l=u,u=y(a,f),a=o,o=r,r=n,n=y(f,d);return t[0]=y(n,t[0]),t[1]=y(r,t[1]),t[2]=y(o,t[2]),t[3]=y(a,t[3]),t[4]=y(u,t[4]),t[5]=y(l,t[5]),t[6]=y(s,t[6]),t[7]=y(c,t[7]),t}function z(e,t){var n,r,o,a,u=[],l=[];if(null!==e)for(r=0;r<e.length;r+=2)t[(r>>>1)%5][(r>>>1)/5|0]=x(t[(r>>>1)%5][(r>>>1)/5|0],new i((255&e[r+1])<<24|(65280&e[r+1])<<8|(16711680&e[r+1])>>>8|e[r+1]>>>24,(255&e[r])<<24|(65280&e[r])<<8|(16711680&e[r])>>>8|e[r]>>>24));for(n=0;24>n;n+=1){for(a=U("SHA3-"),r=0;5>r;r+=1)u[r]=x(t[r][0],t[r][1],t[r][2],t[r][3],t[r][4]);for(r=0;5>r;r+=1)l[r]=x(u[(r+4)%5],v(u[(r+1)%5],1));for(r=0;5>r;r+=1)for(o=0;5>o;o+=1)t[r][o]=x(t[r][o],l[r]);for(r=0;5>r;r+=1)for(o=0;5>o;o+=1)a[o][(2*r+3*o)%5]=v(t[r][o],Z[r][o]);for(r=0;5>r;r+=1)for(o=0;5>o;o+=1)t[r][o]=x(a[r][o],new i(~a[(r+1)%5][o].a&a[(r+2)%5][o].a,~a[(r+1)%5][o].b&a[(r+2)%5][o].b));t[0][0]=x(t[0][0],X[n])}return t}var Q,Y,Z,X;Q=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Y=[new i(Q[0],3609767458),new i(Q[1],602891725),new i(Q[2],3964484399),new i(Q[3],2173295548),new i(Q[4],4081628472),new i(Q[5],3053834265),new i(Q[6],2937671579),new i(Q[7],3664609560),new i(Q[8],2734883394),new i(Q[9],1164996542),new i(Q[10],1323610764),new i(Q[11],3590304994),new i(Q[12],4068182383),new i(Q[13],991336113),new i(Q[14],633803317),new i(Q[15],3479774868),new i(Q[16],2666613458),new i(Q[17],944711139),new i(Q[18],2341262773),new i(Q[19],2007800933),new i(Q[20],1495990901),new i(Q[21],1856431235),new i(Q[22],3175218132),new i(Q[23],2198950837),new i(Q[24],3999719339),new i(Q[25],766784016),new i(Q[26],2566594879),new i(Q[27],3203337956),new i(Q[28],1034457026),new i(Q[29],2466948901),new i(Q[30],3758326383),new i(Q[31],168717936),new i(Q[32],1188179964),new i(Q[33],1546045734),new i(Q[34],1522805485),new i(Q[35],2643833823),new i(Q[36],2343527390),new i(Q[37],1014477480),new i(Q[38],1206759142),new i(Q[39],344077627),new i(Q[40],1290863460),new i(Q[41],3158454273),new i(Q[42],3505952657),new i(Q[43],106217008),new i(Q[44],3606008344),new i(Q[45],1432725776),new i(Q[46],1467031594),new i(Q[47],851169720),new i(Q[48],3100823752),new i(Q[49],1363258195),new i(Q[50],3750685593),new i(Q[51],3785050280),new i(Q[52],3318307427),new i(Q[53],3812723403),new i(Q[54],2003034995),new i(Q[55],3602036899),new i(Q[56],1575990012),new i(Q[57],1125592928),new i(Q[58],2716904306),new i(Q[59],442776044),new i(Q[60],593698344),new i(Q[61],3733110249),new i(Q[62],2999351573),new i(Q[63],3815920427),new i(3391569614,3928383900),new i(3515267271,566280711),new i(3940187606,3454069534),new i(4118630271,4000239992),new i(116418474,1914138554),new i(174292421,2731055270),new i(289380356,3203993006),new i(460393269,320620315),new i(685471733,587496836),new i(852142971,1086792851),new i(1017036298,365543100),new i(1126000580,2618297676),new i(1288033470,3409855158),new i(1501505948,4234509866),new i(1607167915,987167468),new i(1816402316,1246189591)],X=[new i(0,1),new i(0,32898),new i(2147483648,32906),new i(2147483648,2147516416),new i(0,32907),new i(0,2147483649),new i(2147483648,2147516545),new i(2147483648,32777),new i(0,138),new i(0,136),new i(0,2147516425),new i(0,2147483658),new i(0,2147516555),new i(2147483648,139),new i(2147483648,32905),new i(2147483648,32771),new i(2147483648,32770),new i(2147483648,128),new i(0,32778),new i(2147483648,2147483658),new i(2147483648,2147516545),new i(2147483648,32896),new i(0,2147483649),new i(2147483648,2147516424)],Z=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]],void 0!==(r=function(){return a}.call(t,n,t,e))&&(e.exports=r)}()},1749:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,l,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),f=r(c),d=n(0),p=r(d),h=n(2),m=r(h),y=n(4),b=r(y),v=n(5),g=r(v),w=n(8),E=r(w),S=n(1249),C=n(353),_="/oauth/account_callback",O={qq:"/oauth/redirect/login/qqconn?next=",sina:"/oauth/redirect/login/sina?next=",wechat:"/oauth/redirect/login/wechat?next="},k=(l=u=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={socialButtonExpanded:!1},r.accountCallback=function(e){var t=e.login,n=e.type;t?((0,C.setLastUser)(r.clickedServiceName),r.handleLogSocialLoginSuccess(),location.reload()):r.props.onRegister({bySocial:!0,socialType:n})},r.handleBuildSocialAuthLink=function(e){r.clickedServiceName=e,r.handleLogSingleSocialButtonClick(e),window.NWEB={accountCallback:r.accountCallback},document.domain="zhihu.com";var t=O[e];"sina"!==e?window.open(""+t+_,"_blank","top=200,left=400,width=600,height=550,directories=no,menubar=no,toolbar=no"):location.href=""+t+_+"&from="+encodeURIComponent(r.parseNextInfoFromUrl())},r.handleChangeSocialButtonState=function(){r.handleLogSocialLogin(),r.setState(function(e){return{socialButtonExpanded:!e.socialButtonExpanded}})},r.parseNextInfoFromUrl=function(){var e=location.href.split("next");return!e||e.length<=1?location.pathname:e[1].slice(1)},i=n,a(r,i)}return i(t,e),s(t,[{key:"componentWillUnmount",value:function(){window.NWEB&&(document.domain="www.zhihu.com",delete window.NWEB)}},{key:"handleLogSocialLogin",value:function(){E.default.trackEvent(this,{action:"Click",element:"Button",element_name:"SNSSignIn"})}},{key:"handleLogSingleSocialButtonClick",value:function(e){(0,S.handleLogSubmit)(this,"SignIn",{type:S.ZA_SERVICE_NAME_MAP[e]})}},{key:"handleLogSocialLoginSuccess",value:function(){(0,S.handleLogSubmitSuccess)(this,"SignIn",this.clickedServiceName)}},{key:"render",value:function(){var e=this,t=this.state.socialButtonExpanded;return p.default.createElement("span",{className:"Login-socialLogin"},p.default.createElement(b.default,{preset:"plain",onClick:this.handleChangeSocialButtonState,className:(0,m.default)("Login-socialButtonEntrance",{"Login-socialButtonEntrance--hidden":t})},"社交帐号登录"),p.default.createElement("span",{className:(0,m.default)("Login-socialButtonGroup",{"Login-socialButtonGroup--hidden":!t})},p.default.createElement(b.default,{preset:"plain",className:"Login-socialButton",onClick:function(){return e.handleBuildSocialAuthLink("wechat")},disabled:!t},p.default.createElement(g.default,{name:"wechat",className:"Login-socialIcon",width:18,height:17})),p.default.createElement(b.default,{preset:"plain",className:"Login-socialButton",onClick:function(){return e.handleBuildSocialAuthLink("sina")},disabled:!t},p.default.createElement(g.default,{name:"weibo",className:"Login-socialIcon",width:20,height:16})),p.default.createElement(b.default,{preset:"plain",className:"Login-socialButton",onClick:function(){return e.handleBuildSocialAuthLink("qq")},disabled:!t},p.default.createElement(g.default,{name:"qq",className:"Login-socialIcon",width:17,height:19}))))}}]),t}(d.Component),u.propTypes={onRegister:f.default.func.isRequired},l);t.default=k},1750:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.login;return{qrcodeLoginToken:t.qrcodeLoginToken,qrcodeLoginScanStatus:t.qrcodeLoginScanStatus,qrcodeLoginError:t.qrcodeLoginError,qrcodeLoginReturnNewToken:t.qrcodeLoginReturnNewToken,token:e.token}}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c,f,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(1),h=r(p),m=n(0),y=r(m),b=n(3),v=n(9),g=n(2),w=r(g),E=n(5),S=r(E),C=n(91),_=r(C),O=n(356),k=(l=(0,b.connect)(u,{getQrcodeLoginToken:O.getQrcodeLoginToken,checkQrcodeScanStatus:O.checkQrcodeScanStatus,getReQesXUDID:O.getReQesXUDID}))(s=(0,v.withRouter)((f=c=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.cancelCheckQrcodeScanStatus=function(){n.timer&&window.clearInterval(n.timer)},n.checkQrcodeScanStatus=function(e){var t=n.props.checkQrcodeScanStatus;n.timer=setInterval(function(){t({token:e})},2e3)},n.handleChangeStauts=function(e,t){n.setState({stauts:e}),"init"!==e||t||n.getToken()},n.handleChangeLoginType=function(){var e=n.props.onChangeType;n.cancelCheckQrcodeScanStatus(),e()},n.state={type:"password",stauts:"init",errorMessage:""},n}return i(t,e),d(t,[{key:"componentDidMount",value:function(){this.getToken()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.qrcodeLoginToken,r=t.qrcodeLoginScanStatus,o=e.qrcodeLoginToken,a=e.qrcodeLoginScanStatus,i=e.qrcodeLoginError,u=e.qrcodeLoginReturnNewToken;""!==o&&n!==o?(this.cancelCheckQrcodeScanStatus(),"init"!==this.state.stauts&&this.handleChangeStauts("init",!0),this.checkQrcodeScanStatus(o)):r!==a?2!==a&&this.handleChangeStauts(1===a?"success":"init",u||1===r&&0===a):i&&i.code&&(this.cancelCheckQrcodeScanStatus(),40321===i.code&&this.setState({stauts:"error",errorMessage:i.message}))}},{key:"componentWillUnmount",value:function(){this.cancelCheckQrcodeScanStatus()}},{key:"getToken",value:function(){var e=this,t=this.props,n=t.getQrcodeLoginToken,r=t.getReQesXUDID,o=t.token;o&&o.xUDID||this.reQesXUDID?n():r().then(function(){e.reQesXUDID=!0,n()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.isShowPasswordLogin,o=t.qrcodeLoginToken,a=this.state,i=a.stauts,u=a.errorMessage;return"init"===i?y.default.createElement("div",{className:(0,w.default)("Qrcode-container",n)},y.default.createElement("div",{className:"Qrcode-content"},y.default.createElement("div",{className:"Qrcode-img"},o?y.default.createElement("img",{width:"150",height:"150",src:"https://account.zhihu.com/api/login/qrcode/"+o+"/image",alt:"二维码"}):y.default.createElement(_.default,{count:3})),y.default.createElement("p",null,"打开",y.default.createElement("a",{href:"https://www.zhihu.com/app/",target:"_blank"}," 知乎 App")),y.default.createElement("p",null,"在「更多」页面右上角打开扫一扫")),!1!==r&&y.default.createElement("div",{className:"Qrcode-cutButton"},y.default.createElement("span",{onClick:function(){return e.handleChangeLoginType()}},"使用密码登录"))):"success"===i?y.default.createElement("div",{className:(0,w.default)("Qrcode-container",n)},y.default.createElement("div",{className:"Qrcode-content"},y.default.createElement("div",{className:"Qrcode-scanResultStaus"},y.default.createElement(S.default,{name:"success",fill:"#2db370",width:58,height:58})),y.default.createElement("p",{className:"Qrcode-scanResultTips"},"扫描成功"),y.default.createElement("p",null,"请在手机上「确认登录」")),y.default.createElement("div",{className:"Qrcode-cutButton"},y.default.createElement("span",{onClick:function(){return e.handleChangeStauts("init")}},"返回二维码"))):y.default.createElement("div",{className:(0,w.default)("Qrcode-container",n)},y.default.createElement("div",{className:"Qrcode-content Qrcode-failure"},y.default.createElement("div",null,y.default.createElement(S.default,{name:"failure",fill:"#ffaa00",width:58,height:58})),y.default.createElement("p",null,u)),!1!==r&&y.default.createElement("div",{className:"Qrcode-cutButton"},y.default.createElement("span",{onClick:function(){return e.handleChangeLoginType()}},"使用密码登录")))}}]),t}(m.Component),c.propTypes={type:h.default.string,isShowPasswordLogin:h.default.bool,onChangeType:h.default.func,getQrcodeLoginToken:h.default.func,checkQrcodeScanStatus:h.default.func},c.defaultProps={qrcodeLoginToken:"",qrcodeLoginScanStatus:""},s=f))||s)||s;t.default=k},1751:function(e,t){},1752:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SignFlowActiveButton=t.SignFlowActiveModal=t.SignFlowActive=void 0;var o=n(1252),a=r(o),i=n(1324),u=r(i),l=n(1753),s=r(l),c=n(367),f=r(c);t.default=s.default,t.SignFlowActive=a.default,t.SignFlowActiveModal=u.default,t.SignFlowActiveButton=f.default},1753:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,s,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1),p=r(d),h=n(0),m=r(h),y=n(1252),b=r(y),v=n(1324),g=r(v),w=(s=l=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.isInModal,n=e.shown,r=e.onClose,a=o(e,["isInModal","shown","onClose"]);return m.default.createElement("div",null,t?m.default.createElement(g.default,c({onClose:r,shown:n},a)):m.default.createElement(b.default,a))}}]),t}(h.Component),l.propTypes={isInModal:p.default.bool,shown:p.default.bool,onClose:p.default.func},l.defaultProps={isInModal:!1},s);t.default=w},1754:function(e,t){},1755:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,s,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(1),d=r(f),p=n(0),h=r(p),m=n(4),y=r(m),b=n(33),v=r(b),g=n(8),w=r(g),E=n(1197),S=r(E),C=n(1221),_=r(C),O=n(1756),k=r(O),P=n(6);n(1323),n(1325);var T=(s=l=function(e){function t(){var e,n,r,u;a(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={selectedCountry:{code:"+86",name:"中国"},phoneNo:null,smsInputInterceptTime:-1,manualError:null,showFooter:!1,sendValidationCodeButtonText:"发送验证码",identifyingCodeError:null},r.testPhoneNo=function(){var e=r.state,t=e.selectedCountry.code,n=e.phoneNo,o=/^1[34578]\d{9}$/,a=/^\d+$/;return"+86"===t?o.test(n):a.test(n)},r.handleChange=function(e){return function(t){r.setState(o({},e,t))}},r.handleSendDigits=function(e){var t=r.props.requestPhoneVerificationCode,n=r.state,o=n.selectedCountry.code,a=n.phoneNo,i=n.manualError;if(w.default.trackEvent(e.target,{action:"GetCaptcha"}),r.testPhoneNo())return t(""+o+a).then(function(){r.setState({manualError:null})}).catch(function(e){var t=e.err;t=void 0===t?{}:t;var n=t.payload;n=void 0===n?{}:n;var o=n.message;return r.setState({manualError:o,smsInputInterceptTime:Date.now()})});return r.setState({manualError:"请输入正确的手机号"===i?" 请输入正确的手机号":"请输入正确的手机号",smsInputInterceptTime:Date.now()})},r.handleSubmit=function(e){var t=e.phoneNo,n=e.digits,o=r.props,a=o.updatePhoneNumber,i=o.onSuccess,u=o.onNeedUnbind,l=r.state,s=l.selectedCountry.code,c=l.identifyingCodeError;a(""+s+t,n).then(function(e){var n=e.payload,r=n.data;if(n.success)return i();var o=r.bindedAccountFullname,a=r.requestAccountFullname;return u({phoneNumber:t,bindName:o,requiredName:a})}).catch(function(e){var t=e.err;t=void 0===t?{}:t;var n=t.payload;n=void 0===n?{}:n;var o=n.code,a=n.message;o===P.INCORRECT_DIGITS_ERROR_CODE&&r.setState({identifyingCodeError:c===a?" "+a:a})})},r.handleZaOK=function(e){w.default.trackEvent(e.target,{action:"Ok"})},r.renderContent=function(){var e=r.state,t=e.smsInputInterceptTime,n=e.manualError,o=e.sendValidationCodeButtonText,a=e.identifyingCodeError;return h.default.createElement("div",{ref:function(e){r.container=e}},h.default.createElement(S.default,{className:"SignFlowActive SignFlow",onSubmit:r.handleSubmit},!1,h.default.createElement(_.default,{type:"register",supportedCountriesShown:!0,manualValidateError:n,onSelect:r.handleChange("selectedCountry"),onChange:r.handleChange("phoneNo")}),h.default.createElement(k.default,{key:"sms-input",resetText:o,interceptTime:t,countDownEvent:r.handleSendDigits,manualValidateError:a}),h.default.createElement("div",{className:"BindPhone-helpWrapper"},h.default.createElement(y.default,{className:"BindPhone-helpText",preset:"link",onClick:function(){r.setState({showFooter:!0})}},"需要帮助？")),h.default.createElement(y.default,{className:"SignFlowActive-sendDigits",preset:"primary",color:"blue",type:"submit",onClick:r.handleZaOK},"确认")))},u=n,i(r,u)}return u(t,e),c(t,[{key:"componentDidMount",value:function(){w.default.setModule(this.container,{module:"BindPhoneForm"}),w.default.trackCardShow(this.container)}},{key:"render",value:function(){var e=this.props.onClose,t=this.state.showFooter;return h.default.createElement(v.default,{title:"设置手机号",subtitle:"绑定手机后，你就可以使用知乎的提问、回答、评论等功能。",footer:t?"如需要帮助，请联系 i@zhihu.com，我们会尽快帮你解决":null,onClose:e,size:"default"},this.renderContent())}}]),t}(p.Component),l.propTypes={requestPhoneVerificationCode:d.default.func.isRequired,updatePhoneNumber:d.default.func.isRequired,onClose:d.default.func.isRequired,onSuccess:d.default.func.isRequired,onNeedUnbind:d.default.func.isRequired},s);t.default=T},1756:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s,c,f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}([""," 秒后可重发"],[""," 秒后可重发"]),h=n(1),m=r(h),y=n(0),b=r(y),v=n(1319),g=r(v),w=n(1320),E=r(w),S=n(1196),C=r(S);n(1757);var _=(c=s=function(e){function t(){return i(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),d(t,[{key:"render",value:function(){var e=this.props,t=e.countDownEvent,n=e.startAtOnce,r=e.interceptTime,i=e.resetText,u=e.manualValidateError,l=e.onChange,s=e.validations,c=e.countDownEndEvent,d=a(e,["countDownEvent","startAtOnce","interceptTime","resetText","manualValidateError","onChange","validations","countDownEndEvent"]);return b.default.createElement("div",{className:"SignFlow SignFlow-smsInputContainer"},b.default.createElement(C.default,f({name:"digits",className:"SignFlow-smsInput",type:"number",errorMessageClassName:"SignFlow-smsBindPhoneInputErrorMask",placeholder:"输入 6 位验证码",manualValidateError:u,onChange:l,validations:[{type:"required",message:"请填写验证码",className:"SignFlow-smsInputBindPhoneRequiredErrorMask"}].concat(o(s||[]))},d)),b.default.createElement(g.default,{className:"SignFlow-smsInputButton",preset:"plain",initialText:"发送验证码",resetText:i,countingText:(0,E.default)(p,"count"),startAtOnce:n,event:t,countDownEndEvent:c,interceptTime:r}))}}]),t}(y.Component),s.propTypes={countDownEvent:m.default.func.isRequired,startAtOnce:m.default.bool,interceptTime:m.default.number,resetText:m.default.string,manualValidateError:m.default.string},s.defaultProps={startAtOnce:!1,resetText:"重发验证码"},c);t.default=_},1757:function(e,t){},1758:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,l,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),f=r(c),d=n(0),p=r(d),h=n(8),m=r(h),y=n(33),b=r(y),v=n(4),g=r(v),w=n(14),E=r(w),S=(l=u=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.zaKnowMore=function(e){m.default.trackEvent(e.target,{action:"OpenUrl",name:"了解更多"})},r.toBindPhone=function(e){var t=r.props.onBindPhone;m.default.trackEvent(e.target,{action:"OpenUrl",name:"去绑定手机"}),t()},r.handleClose=function(e){var t=r.props,n=t.onClose,o=t.config.canWrite;m.default.trackEvent(e.target,{action:"Cancel",name:o?"暂不绑定":"取消"}),n()},r.renderContent=function(){var e=r.props.config,t=e.tip,n=e.canWrite;return p.default.createElement("div",{ref:function(e){r.container=e}},p.default.createElement("p",null,t,p.default.createElement(E.default,{preset:"link",target:"_blank",href:"https://zhuanlan.zhihu.com/p/27257715",onClick:r.zaKnowMore},"了解更多")),p.default.createElement("div",{className:"BindPhone-buttonSection"},p.default.createElement(E.default,{className:"BindPhone-button",onClick:r.handleClose},n?"暂不绑定":"取消"),p.default.createElement(g.default,{className:"BindPhone-button",preset:"primary",color:"blue",onClick:r.toBindPhone},"去绑定手机")))},i=n,a(r,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){m.default.setModule(this.container,{module:"BindPhoneForm"}),m.default.trackCardShow(this.container)}},{key:"render",value:function(){var e=this.props.onClose;return p.default.createElement(b.default,{className:!1,title:"绑定手机",onClose:e,size:"default"},this.renderContent())}}]),t}(d.Component),u.PropTypes={config:f.default.object,onClose:f.default.func,onBindPhone:f.default.func},l);t.default=S},1759:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,l,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),f=r(c),d=n(0),p=r(d),h=n(33),m=r(h),y=n(4),b=r(y),v=n(8),g=r(v),w=(l=u=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.handleCancel=function(e){var t=r.props.onClose;g.default.trackEvent(e.target,{action:"Cancel",name:"不绑定"}),t()},i=n,a(r,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){g.default.setModule(this.container,{module:"BindMailForm"}),g.default.trackCardShow(this.container)}},{key:"render",value:function(){var e=this,t=this.props.onClose;return p.default.createElement(m.default,{className:!1,title:"手机号绑定成功",onClose:t,size:"default"},p.default.createElement("div",{ref:function(t){e.container=t}},p.default.createElement("p",null,"由于你此前绑定的邮箱未经验证，未来请使用手机号登录知乎。"),p.default.createElement(b.default,{className:"BindPhone-remindLoginWithPhoneButton",onClick:this.handleCancel,preset:"primary",color:"blue"},"知道了")))}}]),t}(d.Component),u.PropTypes={onClose:f.default.func},l);t.default=w},1760:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,l,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),f=r(c),d=n(0),p=r(d),h=n(33),m=r(h),y=n(4),b=r(y),v=n(8),g=r(v),w=(l=u=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.handleCancel=function(e){var t=r.props.onCancel;g.default.trackEvent(e.target,{action:"Click",name:"暂不绑定"}),t()},r.handleConfirm=function(e){var t=r.props.onConfirm;g.default.trackEvent(e.target,{action:"Click",name:"确认解绑"}),t()},i=n,a(r,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){g.default.setModule(this.container,{module:"BindPhoneFailForm"}),g.default.trackCardShow(this.container)}},{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.phoneNumber,o=t.bindName,a=t.requiredName;return p.default.createElement(m.default,{className:!1,title:"绑定失败",onClose:n,size:"default"},p.default.createElement("div",{ref:function(t){e.container=t}},p.default.createElement("p",null,"你所输入的手机号 ",r," 已经被绑定到帐号「",o,"」。"),!1,p.default.createElement("p",null,"你可以选择将该手机号从该帐号中解绑，并绑定至当前帐号「",a,"」。"),!1,p.default.createElement("p",null,p.default.createElement("b",null,"解绑后，你将无法再通过手机号登录原帐号「",o,"」。")),p.default.createElement("div",{className:"BindPhone-buttonSection"},p.default.createElement(b.default,{className:"BindPhone-button",onClick:this.handleConfirm},"确认解绑"),p.default.createElement(b.default,{className:"BindPhone-button",preset:"primary",color:"blue",onClick:this.handleCancel},"暂不绑定"))))}}]),t}(d.Component),u.PropTypes={onClose:f.default.func.isRequired,onCancel:f.default.func.isRequired,onConfirm:f.default.func.isRequired,phoneNumber:f.default.string.isRequired,bindName:f.default.string.isRequired,requiredName:f.default.string.isRequired},l);t.default=w},1761:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u,l,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(1),f=r(c),d=n(0),p=r(d),h=n(33),m=r(h),y=n(4),b=r(y),v=n(8),g=r(v),w=(l=u=function(e){function t(){var e,n,r,i;o(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=a(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.handleUnbind=function(e){var t=r.props,n=t.onSuccess,o=t.monopolizePhoneNumber,a=t.showNotification;g.default.trackEvent(e.target,{action:"Click",name:"确认解绑"}),o().then(function(){return a("绑定成功！","white"),n()})},r.handleCancel=function(e){var t=r.props.onCancel;g.default.trackEvent(e.target,{action:"Click",name:"暂不绑定"}),t()},i=n,a(r,i)}return i(t,e),s(t,[{key:"componentDidMount",value:function(){g.default.setModule(this.container,{module:"BindPhoneVerifyForm"}),g.default.trackCardShow(this.container)}},{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,r=t.bindName;return p.default.createElement(m.default,{className:!1,title:"解绑手机",onClose:n,size:"default"},p.default.createElement("div",{ref:function(t){e.container=t}},p.default.createElement("p",null,p.default.createElement("b",null,"解绑操作无法撤销。")),!1,p.default.createElement("p",null,"如果你没有其他登录方式，你将无法再使用帐号「",r,"」。"),p.default.createElement("div",{className:"BindPhone-buttonSection"},p.default.createElement(b.default,{className:"BindPhone-button",onClick:this.handleUnbind},"确认解绑"),p.default.createElement(b.default,{className:"BindPhone-button",preset:"primary",color:"blue",onClick:this.handleCancel},"暂不绑定"))))}}]),t}(d.Component),u.PropTypes={onClose:f.default.func.isRequired,onSuccess:f.default.func.isRequired,onCancel:f.default.func.isRequired,bindName:f.default.string.isRequired,showNotification:f.default.func.isRequired,monopolizePhoneNumber:f.default.string.isRequired},l);t.default=w}});
//# sourceMappingURL=main.signflow.2d38b4e08bfc5424a820.js.map